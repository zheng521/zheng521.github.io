{"meta":{"title":"åˆè§","subtitle":null,"description":null,"author":"zheng","url":"https://github.com/zheng521","root":"/"},"pages":[],"posts":[{"title":"é‡è½½","slug":"é‡è½½","date":"2023-07-09T06:30:00.000Z","updated":"2023-07-09T08:25:31.065Z","comments":true,"path":"2023/07/09/é‡è½½/","link":"","permalink":"https://github.com/zheng521/2023/07/09/%E9%87%8D%E8%BD%BD/","excerpt":"","text":"é‡è½½å®šä¹‰ å‡½æ•°é‡è½½ï¼ˆè‹±è¯­ï¼šfunction overloadingï¼‰æˆ–æ–¹æ³•é‡è½½ï¼Œæ˜¯æŸäº›ç¼–ç¨‹è¯­è¨€ï¼ˆå¦‚ C++ã€C#ã€Javaã€Swiftã€Kotlin ç­‰ï¼‰å…·æœ‰çš„ä¸€é¡¹ç‰¹æ€§ï¼Œè¯¥ç‰¹æ€§å…è®¸åˆ›å»ºå¤šä¸ªå…·æœ‰ä¸åŒå®ç°çš„åŒåå‡½æ•°ã€‚å¯¹é‡è½½å‡½æ•°çš„è°ƒç”¨ä¼šè¿è¡Œå…¶é€‚ç”¨äºè°ƒç”¨ä¸Šä¸‹æ–‡çš„å…·ä½“å®ç°ï¼Œå³å…è®¸ä¸€ä¸ªå‡½æ•°è°ƒç”¨æ ¹æ®ä¸Šä¸‹æ–‡æ‰§è¡Œä¸åŒçš„ä»»åŠ¡ã€‚ é‡è½½è§„åˆ™ å¤šä¸ªå‡½æ•°å®šä¹‰ä½¿ç”¨ç›¸åŒçš„å‡½æ•°åç§° å‡½æ•°å‚æ•°çš„æ•°é‡æˆ–ç±»å‹å¿…é¡»æœ‰åŒºåˆ« java ä¸­çš„é‡è½½ é‡è½½å¯ä»¥ç†è§£æˆå¤šæ€çš„å…·ä½“è¡¨ç°å½¢å¼ã€‚ åœ¨ä¸€ä¸ªç±»ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰å¤šä¸ªæ–¹æ³•ã€‚å¦‚æœæœ‰ä¸€ç³»åˆ—æ–¹æ³•ï¼Œå®ƒä»¬çš„åŠŸèƒ½éƒ½æ˜¯ç±»ä¼¼çš„ï¼Œåªæœ‰å‚æ•°æœ‰æ‰€ä¸åŒï¼Œé‚£ä¹ˆï¼Œå¯ä»¥æŠŠè¿™ä¸€ç»„æ–¹æ³•ååšæˆåŒåæ–¹æ³•ã€‚ è¿™ç§æ–¹æ³•åç›¸åŒï¼Œä½†å„è‡ªçš„å‚æ•°ä¸åŒï¼Œç§°ä¸ºæ–¹æ³•é‡è½½ï¼ˆOverloadï¼‰ã€‚ 1234567891011121314151617class Hello &#123; public void hello() &#123; System.out.println(&quot;Hello, world!&quot;); &#125; public void hello(String name) &#123; System.out.println(&quot;Hello, &quot; + name + &quot;!&quot;); &#125; public void hello(String name, int age) &#123; if (age &lt; 18) &#123; System.out.println(&quot;Hi, &quot; + name + &quot;!&quot;); &#125; else &#123; System.out.println(&quot;Hello, &quot; + name + &quot;!&quot;); &#125; &#125;&#125; æ³¨æ„ï¼šæ–¹æ³•é‡è½½çš„è¿”å›å€¼ç±»å‹é€šå¸¸éƒ½æ˜¯ç›¸åŒçš„ã€‚ æ–¹æ³•é‡è½½çš„ç›®çš„æ˜¯ï¼ŒåŠŸèƒ½ç±»ä¼¼çš„æ–¹æ³•ä½¿ç”¨åŒä¸€åå­—ï¼Œæ›´å®¹æ˜“è®°ä½ï¼Œå› æ­¤ï¼Œè°ƒç”¨èµ·æ¥æ›´ç®€å•ã€‚ TypeScript é‡è½½JavaScript ä½œä¸ºåŠ¨æ€è¯­è¨€ï¼Œ æ˜¯æ²¡æœ‰é‡è½½è¿™ä¸€è¯´çš„ã€‚ä¸€æ˜¯å®ƒçš„å‚æ•°æ²¡æœ‰ç±»å‹çš„åŒºåˆ†ï¼ŒäºŒæ˜¯å¯¹å‚æ•°ä¸ªæ•°ä¹Ÿæ²¡æœ‰æ£€æŸ¥ã€‚è™½ç„¶è¯­è¨€å±‚é¢æ— æ³•è‡ªåŠ¨è¿›è¡Œé‡è½½ï¼Œä½†å€ŸåŠ©å…¶åŠ¨æ€çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä»£ç ä¸­æ‰‹åŠ¨æ£€æŸ¥å…¥å‚çš„ç±»å‹ï¼Œæˆ–è€…é€šè¿‡ arguments è·å–åˆ°å‚æ•°ä¸ªæ•°ï¼Œä»è€Œå®ç°æ ¹æ®ä¸åŒçš„å…¥å‚åšä¸åŒçš„æ“ä½œã€‚ é‡è½½çš„ç†è§£ç”¨äºå®ç°ä¸åŒå‚æ•°è¾“å…¥å¹¶ä¸”å¯¹åº”ä¸åŒå‚æ•°è¾“å‡ºçš„å‡½æ•°ï¼Œåœ¨å‰é¢å®šä¹‰å¤šä¸ªé‡è½½ç­¾åï¼Œä¸€ä¸ªå®ç°ç­¾åï¼Œä¸€ä¸ªå‡½æ•°ä½“æ„é€ ï¼Œé‡è½½ç­¾åä¸»è¦æ˜¯ç²¾ç¡®æ˜¾ç¤ºå‡½æ•°çš„è¾“å…¥è¾“å‡ºï¼Œå®ç°ç­¾åä¸»è¦æ˜¯å°†æ‰€æœ‰çš„è¾“å…¥è¾“å‡ºç±»å‹åšä¸€ä¸ªå…¨é‡å®šä¹‰ï¼Œé˜²æ­¢TSç¼–è¯‘æŠ¥é”™ï¼Œå‡½æ•°ä½“å°±æ˜¯æ•´ä¸ªæ•´ä¸ªå‡½æ•°å®ç°çš„å…¨éƒ¨é€»è¾‘ã€‚ å‡½æ•°é‡è½½12345678910111213141516171819202122232425function padding(all: number)function padding(topAndBottom: number, leftAndRight: number)function padding(top: number, right: number, bottom: number, left: number)// 1/å®é™…çš„å‡½æ•°ä½“åº”è¯¥åŒ…å«å‡½æ•°é‡è½½çš„æ‰€æœ‰æƒ…å†µfunction padding(a: number, b?: number, c?: number, d?: number) &#123; if (b === undefined &amp;&amp; c === undefined &amp;&amp; d === undefined) &#123; b = c = d = a &#125; else if (c === undefined &amp;&amp; d === undefined) &#123; c = a d = b &#125; return &#123; top: a, right: b, bottom: c, left: d, &#125;&#125;padding (1); // æ­£ç¡®ï¼š all// åŒ¹é…ç¬¬ 1ä¸ªé‡è½½padding (1, 1); // æ­£ç¡®ï¼š topAndBottom, leftAndRight// åŒ¹é…ç¬¬ 2ä¸ªé‡è½½padding (1, 1, 1, 1)ï¼› //æ­£ç¡®ï¼štopã€ right, bottom, left// åŒ¹é…ç¬¬3ä¸ªé‡è½½padding (1, 1, 1) //é”™è¯¯ï¼š Not a part of the available overloads æ³¨æ„ï¼šTypescript ä¸­çš„è¥¿æ•°é‡è½½æ²¡æœ‰ä»»ä½•è¿è¡Œæ—¶çš„å¼€é”€ã€‚å®ƒåªå…è®¸è®°å½•ä½ å¸Œæœ›çš„è°ƒç”¨å‡½æ•°çš„æ–¹å¼ï¼Œå¹¶ä¸”ç¼–è¯‘å™¨ä¼šæ£€æŸ¥å…¶ä½™ä»£ç . é€šè¿‡é¼ æ ‡ç‚¹å‡»å®é™…è°ƒç”¨æ–¹æ³• padding(1),command+é¼ æ ‡å³é”®ï¼Œä»–ä¼šè‡ªåŠ¨è§£æè·³è½¬åˆ°numberè¿™ä¸ªé‡è½½ç­¾åä¸Šé¢å»ï¼Œå¾ˆç›´è§‚çš„çŸ¥é“å¦‚ä½•è°ƒç”¨çš„ã€‚ é‡è½½è¿‡ç¨‹TypeScript é‡è½½çš„è¿‡ç¨‹æ˜¯ï¼Œæ‹¿ä¼ å…¥çš„å‚æ•°å’Œé‡è½½çš„æ–¹æ³•ç­¾ååˆ—è¡¨ä¸­ç”±ä¸Šå¾€ä¸‹é€ä¸ªåŒ¹é…ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªå®Œå…¨åŒ¹é…çš„å‡½æ•°ç­¾åï¼Œå¦åˆ™æŠ¥é”™ã€‚æ‰€ä»¥æ¨èçš„åšæ³•æ˜¯å°†ç­¾åæ›´åŠ å…·ä½“çš„é‡è½½æ”¾ä¸Šé¢ï¼Œä¸é‚£ä¹ˆå…·ä½“çš„æ”¾åé¢ã€‚ 12345678// good function getMessage(type: MessageType, count?: number): Message[];function getMessage(id: number): Message | undefined;//bad function getMessage(id: number): Message | undefined;function getMessage(type: MessageType, count?: number): Message[]; æ–¹æ³•é‡è½½1234567891011121314151617181920 class ArrayEN &#123; constructor(public arr: object[]) &#123;&#125; get(Index: number) &#123; return this.arr[Index]; &#125; delete(value: number): number; delete(value: object): object; delete(value: number | object): number | object &#123; this.arr = this.arr.filter((item, index) =&gt; &#123; if (typeof value === &quot;number&quot;) &#123; return value !== index; &#125; else &#123; return value !== item; &#125; &#125;); return value; &#125;&#125; æ„é€ å™¨é‡è½½æ„é€ å™¨æ˜¯æ²¡æœ‰è¿”å›å€¼çš„ï¼Œä»–ä¼šéšå¼è¿”å›ä¸€ä¸ªthisï¼Œè¿™ä¸ªthisä¼šåˆ†é…ç»™newå¯¹è±¡çš„å·¦è¾¹çš„å˜é‡ï¼Œè‡³æ­¤æ‰€æœ‰çš„thiséƒ½æ˜¯æŒ‡å‘çš„å½“å‰æ­£åœ¨ä½¿ç”¨çš„å¯¹è±¡ã€‚æ„é€ å™¨é‡è½½å’Œå‡½æ•°é‡è½½ä½¿åŸºæœ¬ç›¸åŒï¼Œä¸»è¦åŒºåˆ«æ˜¯ï¼šTS ç±»æ„é€ å™¨é‡è½½ç­¾åå’Œå®ç°ç­¾åéƒ½ä¸éœ€è¦ç®¡ç†è¿”å›å€¼ï¼ŒTS æ„é€ å™¨æ˜¯åœ¨å¯¹è±¡åˆ›å»ºå‡ºæ¥ä¹‹åï¼Œä½†æ˜¯è¿˜æ²¡æœ‰èµ‹å€¼ç»™å¯¹è±¡å˜é‡ä¹‹å‰è¢«æ‰§è¡Œï¼Œä¸€èˆ¬ç”¨æ¥ç»™å¯¹è±¡å±æ€§èµ‹å€¼ã€‚ 1234567891011121314151617181920212223242526272829 interface OJType&#123; width?:number, height?:number&#125;class Graph&#123; public width:number; public height:number; constructor(width?:number,height?:number) constructor(side?:OJType) constructor(v1:any,v2?:any)&#123; if(typeof v1===&#x27;object&#x27;)&#123; this.width=v1.width; this.height=v1.height &#125;else&#123; this.width=v1; this.height=v2; &#125; &#125; getArea()&#123; const &#123;width,height&#125;=this; return width*height &#125;&#125;const g=new Graph(10,10);console.log(g.getArea()) æ‰©æ•£é‡å†™ æ–¹æ³•çš„é‡å†™(Overriding)å’Œé‡è½½(Overloading)æ˜¯javaå¤šæ€æ€§çš„ä¸åŒè¡¨ç°ï¼Œé‡å†™æ˜¯çˆ¶ç±»ä¸å­ç±»ä¹‹é—´å¤šæ€æ€§çš„ä¸€ç§è¡¨ç°ï¼Œé‡è½½å¯ä»¥ç†è§£æˆå¤šæ€çš„å…·ä½“è¡¨ç°å½¢å¼ã€‚ æ–¹æ³•é‡è½½æ˜¯ä¸€ä¸ªç±»ä¸­å®šä¹‰äº†å¤šä¸ªæ–¹æ³•åç›¸åŒ,è€Œä»–ä»¬çš„å‚æ•°çš„æ•°é‡ä¸åŒæˆ–æ•°é‡ç›¸åŒè€Œç±»å‹å’Œæ¬¡åºä¸åŒ,åˆ™ç§°ä¸ºæ–¹æ³•çš„é‡è½½(Overloading)ã€‚ æ–¹æ³•é‡å†™æ˜¯åœ¨å­ç±»å­˜åœ¨æ–¹æ³•ä¸çˆ¶ç±»çš„æ–¹æ³•çš„åå­—ç›¸åŒ,è€Œä¸”å‚æ•°çš„ä¸ªæ•°ä¸ç±»å‹ä¸€æ ·,è¿”å›å€¼ä¹Ÿä¸€æ ·çš„æ–¹æ³•,å°±ç§°ä¸ºé‡å†™(Overriding)ã€‚ æ–¹æ³•é‡è½½æ˜¯ä¸€ä¸ªç±»çš„å¤šæ€æ€§è¡¨ç°,è€Œæ–¹æ³•é‡å†™æ˜¯å­ç±»ä¸çˆ¶ç±»çš„ä¸€ç§å¤šæ€æ€§è¡¨ç°ã€‚","categories":[],"tags":[]},{"title":"reactåŸºç¡€","slug":"reactåŸºç¡€","date":"2023-04-05T02:42:06.000Z","updated":"2023-04-06T06:14:15.968Z","comments":true,"path":"2023/04/05/reactåŸºç¡€/","link":"","permalink":"https://github.com/zheng521/2023/04/05/react%E5%9F%BA%E7%A1%80/","excerpt":"","text":"react ç”Ÿå‘½å‘¨æœŸ constructorâ± è§¦å‘æ—¶æœºï¼šåœ¨ç»„ä»¶åˆå§‹åŒ–çš„æ—¶å€™è§¦å‘ä¸€æ¬¡ã€‚ğŸ’¡ ä½¿ç”¨å»ºè®®ï¼š è®¾ç½®åˆå§‹åŒ–çŠ¶æ€ï¼šå› ä¸ºç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¸­ä»»ä½•å‡½æ•°éƒ½å¯èƒ½è¦è®¿é—® Stateï¼Œé‚£ä¹ˆæ•´ä¸ªå‘¨æœŸä¸­ç¬¬ä¸€ä¸ªè¢«è°ƒç”¨çš„æ„é€ å‡½æ•°ä¾¿æ˜¯åˆå§‹åŒ– state æœ€ç†æƒ³çš„åœ°æ–¹ï¼› ç»‘å®šæˆå‘˜å‡½æ•°ä¸Šä¸‹æ–‡å¼•ç”¨ï¼š å› ä¸ºåœ¨ ES6 è¯­æ³•ä¸‹ï¼Œç±»çš„æ¯ä¸ªæˆå‘˜å‡½æ•°åœ¨æ‰§è¡Œæ—¶çš„ this å¹¶ä¸æ˜¯å’Œç±»å®ä¾‹è‡ªåŠ¨ç»‘å®šçš„ï¼› è€Œåœ¨æ„é€ å‡½æ•°ä¸­ this å°±æ˜¯å½“å‰ç»„ä»¶å®ä¾‹ï¼Œæ‰€ä»¥ï¼Œä¸ºäº†æ–¹ä¾¿å°†æ¥è°ƒç”¨ï¼Œå¾€å¾€åœ¨æ„é€ å‡½æ•°ä¸­å°†è¿™ä¸ªå®ä¾‹çš„ç‰¹å®šå‡½æ•°ç»‘å®š this ä¸ºå½“å‰ç±»å®ä¾‹ï¼› å»ºè®®å®šä¹‰å‡½æ•°æ–¹æ³•æ—¶ç›´æ¥ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Œå°±æ— é¡»åœ¨æ„é€ å‡½æ•°ä¸­è¿›è¡Œå‡½æ•°çš„ bind æ“ä½œã€‚ static getDerivedStateFromPropsâ± è§¦å‘æ—¶æœºï¼šè¯¥å‡½æ•°ä¼šåœ¨ç»„ä»¶åŒ–å®ä¾‹åŒ–åå’Œé‡æ–°æ¸²æŸ“å‰è°ƒç”¨ï¼ˆç”Ÿæˆ VirtualDOM ä¹‹åï¼Œå®é™… DOM æŒ‚è½½ä¹‹å‰ï¼‰ï¼Œæ„å‘³ç€æ— è®ºæ˜¯çˆ¶ç»„ä»¶çš„æ›´æ–°ã€props çš„å˜åŒ–æˆ–é€šè¿‡ setState æ›´æ–°ç»„ä»¶å†…éƒ¨çš„ Stateï¼Œå®ƒéƒ½ä¼šè¢«è°ƒç”¨ã€‚ ğŸ”™ è¿”å›å€¼ï¼šè¯¥ç”Ÿå‘½å‘¨æœŸå‡½æ•°å¿…é¡»æœ‰è¿”å›å€¼ï¼Œå®ƒéœ€è¦è¿”å›ä¸€ä¸ªå¯¹è±¡æ¥æ›´æ–° Stateï¼Œæˆ–è€…è¿”å› null æ¥è¡¨æ˜æ–° props ä¸éœ€è¦æ›´æ–°ä»»ä½• stateã€‚ ğŸ†• æ–°ç‰¹æ€§ï¼šå½“ç»„ä»¶å®ä¾‹åŒ–æ—¶ï¼Œè¯¥æ–¹æ³•æ›¿ä»£äº† componentWillMountï¼Œè€Œå½“æ¥æ”¶æ–°çš„ props æ—¶ï¼Œè¯¥æ–¹æ³•æ›¿ä»£äº† componentWillReceiveProps å’Œ componentWillUpdateã€‚ âš ï¸ æ³¨æ„äº‹é¡¹ï¼š åœ¨ç»„ä»¶è£…è½½å’Œæ›´æ–°é˜¶æ®µéƒ½ä¼šè§¦å‘ã€‚ å¦‚æœçˆ¶ç»„ä»¶å¯¼è‡´äº†ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ï¼Œå³ä½¿å±æ€§æ²¡æœ‰æ›´æ–°ï¼Œè¿™ä¸€æ–¹æ³•ä¹Ÿä¼šè¢«è§¦å‘ï¼› å¦‚æœä½ åªæƒ³å¤„ç† props çš„å‰åå˜åŒ–ï¼Œä½ éœ€è¦å°†ä¸Šä¸€ä¸ª props å€¼å­˜åˆ° state é‡Œä½œä¸ºé•œåƒï¼› è¯¥ç”Ÿå‘½å‘¨æœŸå‡½æ•°æ˜¯ä¸€ä¸ªé™æ€å‡½æ•°ï¼Œæ‰€ä»¥å‡½æ•°ä½“å†…æ— æ³•è®¿é—®æŒ‡å‘å½“å‰ç»„ä»¶å®ä¾‹çš„æŒ‡é’ˆ thisï¼›å½“éœ€è¦æ›´æ–° state æ—¶ï¼Œéœ€è¦è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¦åˆ™ï¼Œè¿”å›ä¸€ä¸ª null renderå®ƒæ˜¯ä¸€ä¸ªä»…ä»…ç”¨äºæ¸²æŸ“çš„çº¯å‡½æ•°ï¼Œè¿”å›å€¼å®Œå…¨å–å†³äº state å’Œ propsï¼Œä¸èƒ½åœ¨å‡½æ•°ä¸­ä»»ä½•ä¿®æ”¹ stateã€propsã€è¯·æ±‚æ•°æ®ç­‰å…·æœ‰å‰¯ä½œç”¨çš„æ“ä½œï¼Œä¸èƒ½è¯»å†™ DOM ä¿¡æ¯ï¼Œä¹Ÿä¸èƒ½å’Œæµè§ˆå™¨è¿›è¡Œäº¤äº’ï¼ˆä¾‹å¦‚ setTimeoutï¼‰ã€‚å¦‚æœéœ€è¦å’Œæµè§ˆå™¨äº¤äº’ï¼Œåœ¨ componentDidMount() ä¸­æˆ–è€…å…¶å®ƒç”Ÿå‘½å‘¨æœŸæ–¹æ³•å®Œæˆç›¸å…³äº‹åŠ¡ã€‚ âš ï¸ æ³¨æ„äº‹é¡¹ï¼š è¯·å‹¿åœ¨æ­¤å‡½æ•°ä¸­ä½¿ç”¨ setState æ–¹æ³•ï¼› è¯·å‹¿åœ¨æ­¤å‡½æ•°ä¸­ä¿®æ”¹ propsã€state ä»¥åŠæ•°æ®è¯·æ±‚ç­‰å…·æœ‰å‰¯ä½œç”¨çš„æ“ä½œã€‚ componentDidMountâ± è§¦å‘æ—¶æœºï¼šç»„ä»¶å®Œå…¨æŒ‚è½½åˆ°ç½‘é¡µä¸Šåè§¦å‘ã€‚ ğŸ‰ é€‚ç”¨åœºæ™¯ï¼šå‘é€ç½‘ç»œè¯·æ±‚ï¼›ä»»ä½•ä¾èµ–äº DOM çš„åˆå§‹åŒ–æ“ä½œï¼›æ·»åŠ äº‹ä»¶ç›‘å¬ï¼›å¦‚æœä½¿ç”¨äº† Redux ä¹‹ç±»çš„æ•°æ®ç®¡ç†å·¥å…·ï¼Œä¹Ÿèƒ½è§¦å‘ action å¤„ç†æ•°æ®å˜åŒ–é€»è¾‘ã€‚ ğŸ”¬æ·±å…¥ç ”ç©¶ï¼šè¯¥å‡½æ•°ä¸ä¼šåœ¨ render å‡½æ•°è°ƒç”¨å®Œæˆä¹‹åç«‹å³è§¦å‘ï¼Œå› ä¸º render å‡½æ•°ä»…ä»…æ˜¯è¿”å›äº† JSX çš„å¯¹è±¡ï¼Œå¹¶æ²¡æœ‰ç«‹å³æŒ‚è½½åˆ° DOM æ ‘ä¸Šï¼Œè€Œè¯¥ç”Ÿå‘½å‘¨æœŸå‡½æ•°æ˜¯åœ¨ç»„ä»¶è¢«æ¸²æŸ“åˆ° DOM æ ‘ï¼ˆç§°ä¸ºåˆå§‹åŒ–æ¸²æŸ“ï¼‰ä¹‹åè§¦å‘çš„ã€‚ âš ï¸ æ³¨æ„äº‹é¡¹ï¼šè¯¥ç”Ÿå‘½å‘¨æœŸå‡½æ•°åœ¨è¿›è¡ŒæœåŠ¡å™¨ç«¯æ¸²æŸ“æ—¶ä¸ä¼šè§¦å‘ï¼ˆä»…å®¢æˆ·ç«¯æœ‰æ•ˆï¼‰ã€‚ shouldComponentUpdateâ± è§¦å‘æ—¶æœºï¼šæ¯æ¬¡ç»„ä»¶å› ä¸º state å’Œ props å˜åŒ–è€Œæ›´æ–°æ—¶ï¼Œåœ¨é‡æ–°æ¸²æŸ“å‰è¯¥ç”Ÿå‘½å‘¨æœŸå‡½æ•°éƒ½ä¼šè§¦å‘ï¼Œè®© React çŸ¥é“å½“å‰ state æˆ– props çš„æ”¹å˜æ˜¯å¦å½±å“ç»„ä»¶çš„è¾“å‡ºï¼ˆæ¸²æŸ“ï¼‰ã€‚ ğŸ”™ è¿”å›å€¼ï¼šæ ¹æ®é€»è¾‘åˆ¤æ–­è¿”å› true è¡¨ç¤ºç»§ç»­è¿›è¡Œç»„ä»¶æ¸²æŸ“ï¼Œå¦åˆ™å°†åœæ­¢ç»„ä»¶æ¸²æŸ“è¿‡ç¨‹ã€‚é»˜è®¤è¿”å› trueï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦ç»„ä»¶è§¦å‘äº†æ›´æ–°ï¼Œç»„ä»¶å°±ä¸€å®šä¼šæ›´æ–°ã€‚ ğŸ”¬æ·±å…¥ç ”ç©¶ï¼šåœ¨ä¸€ä¸ªæ›´æ–°ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œç»„ä»¶åŠå…¶å­ç»„ä»¶å°†æ ¹æ®è¯¥æ–¹æ³•è¿”å›çš„å¸ƒå°”å€¼æ¥å†³å®šæ˜¯å¦ç»§ç»­è¿™æ¬¡æ›´æ–°è¿‡ç¨‹ï¼ˆé‡æ–°æ¸²æŸ“ï¼‰ã€‚è¿™æ ·ä½ å¯ä»¥åœ¨å¿…è¦çš„æ—¶å€™é˜»æ­¢ç»„ä»¶çš„æ¸²æŸ“ç”Ÿå‘½å‘¨æœŸï¼ˆRender Lifecycleï¼‰æ–¹æ³•ï¼Œé¿å…ä¸å¿…è¦çš„æ¸²æŸ“ã€‚ âš ï¸ æ³¨æ„äº‹é¡¹ï¼š æ­¤é’©å­å‡½æ•°åœ¨åˆå§‹åŒ–æ¸²æŸ“å’Œä½¿ç”¨äº† forceUpdate æ–¹æ³•çš„æƒ…å†µä¸‹ä¸ä¼šè¢«è§¦å‘ï¼Œä½¿ç”¨ forceUpdate ä¼šå¼ºåˆ¶æ›´æ–° è¯·å‹¿åœ¨æ­¤å‡½æ•°ä¸­ä½¿ç”¨ setState æ–¹æ³•ï¼Œä¼šå¯¼è‡´å¾ªç¯è°ƒç”¨ã€‚ getSnapshotBeforeUpdateâ± è§¦å‘æ—¶æœºï¼šè¯¥ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¼šåœ¨ç»„ä»¶å³å°†æŒ‚è½½æ—¶è§¦å‘ï¼Œå®ƒçš„è§¦å‘åœ¨ render æ¸²æŸ“å‡½æ•°ä¹‹åã€‚ç”±æ­¤å¯è§ï¼Œrender å‡½æ•°å¹¶æ²¡æœ‰å®ŒæˆæŒ‚è½½æ“ä½œï¼Œè€Œæ˜¯è¿›è¡Œæ„å»ºæŠ½è±¡ UIï¼ˆä¹Ÿå°±æ˜¯ Virtual DOMï¼‰çš„å·¥ä½œã€‚è¯¥ç”Ÿå‘½å‘¨æœŸå‡½æ•°æ‰§è¡Œå®Œæ¯•åå°±ä¼šç«‹å³è§¦å‘ componentDidUpdate ç”Ÿå‘½å‘¨æœŸé’©å­ã€‚ ğŸ‰ é€‚ç”¨åœºæ™¯ï¼šè¯¥ç”Ÿå‘½å‘¨æœŸå‡½æ•°èƒ½è®©ä½ æ•è·æŸäº›ä» DOM ä¸­æ‰èƒ½è·å–çš„ï¼ˆå¯èƒ½ä¼šå˜æ›´çš„ï¼‰ä¿¡æ¯ï¼ˆä¾‹å¦‚ï¼Œå…ƒç´ é‡æ–°æ¸²æŸ“åé¡µé¢å„ç§å®šä½ä½ç½®çš„å˜æ›´ç­‰ï¼‰ã€‚ ä½œç”¨ï¼šæ¯”å¦‚ç½‘é¡µæ»šåŠ¨ä½ç½®ï¼Œä¸éœ€è¦å®ƒæŒä¹…åŒ–ï¼Œåªéœ€è¦åœ¨ç»„ä»¶æ›´æ–°ä»¥åèƒ½å¤Ÿæ¢å¤åŸæ¥çš„ä½ç½®å³å¯ã€‚ âš ï¸ æ³¨æ„äº‹é¡¹ï¼š è¯¥ç”Ÿå‘½å‘¨æœŸå‡½æ•°è¿”å›çš„å€¼å°†ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ä¼ é€’ç»™ componentDidUpdateï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªé€šé“ä¿å­˜ä¸€äº›ä¸éœ€è¦æŒä¹…åŒ–çš„çŠ¶æ€ï¼Œç”¨å®Œå³å¯èˆå¼ƒã€‚ï¼ˆè¿™ä¸ªç”Ÿå‘½å‘¨æœŸä¸æ˜¯ç»å¸¸éœ€è¦çš„ï¼Œä½†å¯ä»¥ç”¨äºåœ¨æ¢å¤æœŸé—´æ‰‹åŠ¨ä¿å­˜æ»šåŠ¨ä½ç½®çš„æƒ…å†µã€‚ï¼‰ è¯¥å‡½æ•°çš„å‡ºç°æ˜¯ä¸ºäº† React 17 çš„å¼‚æ­¥æ¸²æŸ“è€Œå‡†å¤‡çš„ componentDidUpdateâ± è§¦å‘æ—¶æœºï¼šç»„ä»¶æ¯æ¬¡é‡æ–°æ¸²æŸ“åè§¦å‘ï¼Œç›¸å½“äºé¦–æ¬¡æ¸²æŸ“ï¼ˆåˆå§‹åŒ–ï¼‰ä¹‹åè§¦å‘ componentDidMount ï¼Œ ğŸ‰ é€‚ç”¨åœºæ™¯ï¼šæ“ä½œ DOMï¼›å‘é€ç½‘ç»œè¯·æ±‚ã€‚ âš ï¸ æ³¨æ„äº‹é¡¹ï¼š å°†åŸå…ˆå†™åœ¨ componentWilUpdate ä¸­çš„å›è°ƒè¿ç§»è‡³ componentDidUpdateï¼Œå°†ä»¥å‰æ”¾åœ¨ componentWillReceiveProps ä¸­çš„å¼‚æ­¥ç½‘ç»œè¯·æ±‚æ”¾åœ¨ componentDidUpdate ä¸­ã€‚ åœ¨è¯¥ç”Ÿå‘½å‘¨æœŸä¸­ä½¿ç”¨ setState æ—¶ï¼Œå¿…é¡»åŠ  if æ¡ä»¶åˆ¤æ–­ï¼Œé€šè¿‡åˆ¤æ–­ prevPropsã€prevState å’Œ this.state ä¹‹é—´çš„æ•°æ®å˜åŒ–ï¼Œæ¥åˆ¤æ–­æ˜¯å¦æ‰§è¡Œç›¸å…³çš„ state å˜æ›´é€»è¾‘ï¼Œè¿™ä½¿å¾—å°½ç®¡åœ¨ componentDidUpdate ä¸­è°ƒç”¨äº† setState è¿›è¡Œå†æ›´æ–°ï¼Œä½†æ˜¯ç›´è‡³æ¡ä»¶ä¸æˆç«‹ï¼Œå°±ä¸ä¼šé€ æˆç¨‹åºæ­»å¾ªç¯ã€‚ æ­¤ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸ä¼šåœ¨åˆå§‹åŒ–æ¸²æŸ“çš„æ—¶å€™è§¦å‘ã€‚ componentWillUnmountâ± è§¦å‘æ—¶æœºï¼šåœ¨ç»„ä»¶å¸è½½å’Œé”€æ¯ä¹‹å‰è§¦å‘ã€‚å¯ä»¥åˆ©ç”¨è¿™ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•å»æ‰§è¡Œä»»ä½•æ¸…ç†ä»»åŠ¡ã€‚ ğŸ‰ é€‚ç”¨åœºæ™¯ï¼šç”¨äºæ³¨é”€äº‹ä»¶ç›‘å¬å™¨ï¼›å–æ¶ˆç½‘ç»œè¯·æ±‚ï¼›å–æ¶ˆå®šæ—¶å™¨ï¼›è§£ç»‘ DOM äº‹ä»¶ã€‚ âš ï¸ æ³¨æ„äº‹é¡¹ï¼šåœ¨è¯¥æ–¹æ³•ä¸­è°ƒç”¨ setState ä¸ä¼šè§¦å‘ renderï¼Œå› ä¸ºæ‰€æœ‰çš„æ›´æ–°é˜Ÿåˆ—ï¼Œæ›´æ–°çŠ¶æ€éƒ½è¢«é‡ç½®ä¸º nullã€‚ static getDerivedStateFromErrorâ± è§¦å‘æ—¶æœºï¼šè¯¥ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¼šåœ¨å­å­™ç»„ä»¶æŠ›å‡ºé”™è¯¯æ—¶æ‰§è¡Œã€‚ ğŸ”™ è¿”å›å€¼ï¼šå®ƒæ¥æ”¶æŠ›å‡ºçš„é”™è¯¯ä½œä¸ºå‚æ•°å¹¶ä¸”éœ€è¦è¿”å›å€¼ç”¨äºæ›´æ–° Stateã€‚ ğŸ’¡ ä½¿ç”¨å»ºè®®ï¼š è¯¥ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­å¯ç”¨äºä¿®æ”¹ state ä»¥æ˜¾ç¤ºé”™è¯¯æé†’çš„ UIï¼Œæˆ–è€…å°†é”™è¯¯ä¿¡æ¯å‘é€åˆ°æœåŠ¡ç«¯è¿›è¡Œ Log ç”¨äºåæœŸåˆ†æï¼› åœ¨æ•è·åˆ°é”™è¯¯çš„ç¬é—´ï¼ŒReact ä¼šåœ¨è¿™æ¬¡æ¸²æŸ“å‘¨æœŸä¸­å°†è¿™ä¸ªç»„ä»¶æ¸²æŸ“ä¸º nullï¼Œè¿™å°±æœ‰å¯èƒ½å¯¼è‡´ä»–çš„çˆ¶ç»„ä»¶è®¾ç½®ä»–ä¸Šé¢çš„ ref è·å¾— null è€Œå¯¼è‡´ä¸€äº›é—®é¢˜ï¼› componentDidCatch â± è§¦å‘æ—¶æœºï¼šè¯¥ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¼šåœ¨å­å­™ç»„ä»¶æŠ›å‡ºé”™è¯¯æ—¶è§¦å‘ã€‚ âš ï¸ æ³¨æ„äº‹é¡¹ï¼šé”™è¯¯è¾¹ç•Œåªèƒ½æ•æ‰ç”Ÿå‘½å‘¨æœŸä¸­çš„é”™è¯¯ï¼ˆcomponentWillMount &#x2F; render ç­‰æ–¹æ³•åœ¨å†…ï¼‰ã€‚æ— æ³•æ•æ‰å¼‚æ­¥ã€äº‹ä»¶å›è°ƒä¸­çš„é”™è¯¯ï¼Œè¦æ•æ‰å’Œè¦†ç›–æ‰€æœ‰åœºæ™¯ä¾ç„¶éœ€è¦é…åˆ window.onerrorã€Promise.catchã€try&#x2F;catch ç­‰æ–¹å¼ã€‚ çˆ¶å­ç”Ÿå‘½å‘¨æœŸé¦–æ¬¡æ¸²æŸ“è¿‡ç¨‹1çˆ¶constructor-&gt;çˆ¶getDerivedStateFromProps-&gt;çˆ¶renders-&gt;å­constructor-&gt;å­getDerivedStateFromProps-&gt;å­renders-&gt;å­componentDidMount-&gt;çˆ¶componentDidMount æ›´æ–°è¿‡ç¨‹1çˆ¶getDerivedStateFromPops-&gt;çˆ¶shouldComponentUpdate-&gt;çˆ¶render-&gt;å­getDerivedStateFromPops-&gt;å­shouldComponentUpdate-&gt;å­render-&gt;å­getSnapshotBeforeUpdate-&gt;çˆ¶getSnapshotBeforeUpdate-&gt;å­componentDidUpdate-&gt;çˆ¶å­componentDidUpdate å¸è½½è¿‡ç¨‹1çˆ¶getDerivedStateFromPops-&gt;çˆ¶shouldComponentUpdate-&gt;çˆ¶render-&gt;çˆ¶getSnapshotBeforeUpdate-&gt;å­componentWillUnmount-&gt;çˆ¶componentDidUpdate çˆ¶å­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œé¡ºåºæ€»ç»“ï¼š å½“å­ç»„ä»¶è‡ªèº«çŠ¶æ€æ”¹å˜æ—¶ï¼Œä¸ä¼šå¯¹çˆ¶ç»„ä»¶äº§ç”Ÿå‰¯ä½œç”¨çš„æƒ…å†µä¸‹ï¼Œçˆ¶ç»„ä»¶ä¸ä¼šè¿›è¡Œæ›´æ–°ï¼Œå³ä¸ä¼šè§¦å‘çˆ¶ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ å½“çˆ¶ç»„ä»¶ä¸­çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼ˆåŒ…æ‹¬å­ç»„ä»¶çš„æŒ‚è½½ä»¥åŠå¸è½½ï¼‰æ—¶ï¼Œä¼šè§¦å‘è‡ªèº«å¯¹åº”çš„ç”Ÿå‘½å‘¨æœŸä»¥åŠå­ç»„ä»¶çš„æ›´æ–° render ä»¥åŠ render ä¹‹å‰çš„ç”Ÿå‘½å‘¨æœŸï¼Œåˆ™ çˆ¶ç»„ä»¶å…ˆæ‰§è¡Œ render ä¹‹åçš„å£°æ˜å‘¨æœŸï¼Œåˆ™å­ç»„ä»¶å…ˆæ‰§è¡Œï¼Œå¹¶ä¸”æ˜¯ä¸çˆ¶ç»„ä»¶äº¤æ›¿æ‰§è¡Œ å½“å­ç»„ä»¶è¿›è¡Œå¸è½½æ—¶ï¼Œåªä¼šæ‰§è¡Œè‡ªèº«çš„ componentWillUnmount ç”Ÿå‘½å‘¨æœŸï¼Œä¸ä¼šå†è§¦å‘åˆ«çš„ç”Ÿå‘½å‘¨æœŸ react ä¼˜åŒ– å¾ªç¯ä½¿ç”¨ key ä¿®æ”¹ css æ¨¡æ‹Ÿ v-show ä½¿ç”¨ Fragment å‡å°‘å±‚çº§ JSX ä¸­ä¸è¦å®šä¹‰å‡½æ•° åœ¨æ„é€ å‡½æ•° bind this ä½¿ç”¨ shouldComponentUpdate æ§åˆ¶ç»„ä»¶æ¸²æŸ“ React.memo ç¼“å­˜å‡½æ•°ç»„ä»¶ useMemo ç¼“å­˜æ•°æ® å¼‚æ­¥ç»„ä»¶ è·¯ç”±æ‡’åŠ è½½ SSR reacté‡åˆ°çš„å‘ JSX ä¸­ï¼Œè‡ªå®šä¹‰ç»„ä»¶å‘½åï¼Œå¼€å¤´å­—æ¯è¦å¤§å†™ï¼Œhtml æ ‡ç­¾å¼€å¤´å­—æ¯å°å†™ JSX ä¸­ for å†™æˆ htmlFor ï¼Œ class å†™æˆ className state ä½œä¸ºä¸å¯å˜æ•°æ®ï¼Œä¸å¯ç›´æ¥ä¿®æ”¹ï¼Œä½¿ç”¨çº¯å‡½æ•° JSX ä¸­ï¼Œå±æ€§è¦åŒºåˆ† JS è¡¨è¾¾å¼å’Œå­—ç¬¦ä¸²12&lt;Demo position=&#123;1&#125; flag=&#123;true&#125;/&gt;&lt;Demo position=&quot;1&quot; flag=&quot;true&quot;/&gt; state æ˜¯å¼‚æ­¥æ›´æ–°çš„ï¼Œè¦åœ¨ callback ä¸­æ‹¿åˆ°æœ€æ–°çš„ state å€¼React Hooks æœ‰å¾ˆå¤šé™åˆ¶ï¼Œæ³¨æ„ä¸åˆ°å°±ä¼šè¸©å‘ã€‚ä¾‹å¦‚ï¼ŒuseEffect å†…éƒ¨ä¸èƒ½ä¿®æ”¹ state 123456789101112131415function App() &#123; const [count, setCount] = useState(0) useEffect(() =&gt; &#123; const timer = setInterval(() =&gt; &#123; setCount(count + 1) // å¦‚æœä¾èµ–æ˜¯ [] ï¼Œè¿™é‡Œ setCount ä¸ä¼šæˆåŠŸ &#125;, 1000) return () =&gt; clearTimeout(timer) &#125;, [count]) // åªæœ‰ä¾èµ–æ˜¯ [count] æ‰å¯ä»¥ï¼Œè¿™æ ·æ‰ä¼šè§¦å‘ç»„ä»¶ update return &lt;div&gt;count: &#123;count&#125;&lt;/div&gt;&#125;export default App å†ä¾‹å¦‚ï¼ŒuseEffect ä¾èµ–é¡¹ï¼ˆå³ç¬¬äºŒä¸ªå‚æ•°ï¼‰é‡Œæœ‰å¯¹è±¡ã€æ•°ç»„ï¼Œå°±ä¼šå‡ºç°æ­»å¾ªç¯ã€‚æ‰€ä»¥ï¼Œä¾èµ–é¡¹é‡Œéƒ½è¦æ˜¯å€¼ç±»å‹ã€‚å› ä¸º React Hooks æ˜¯é€šè¿‡ Object.is è¿›è¡Œä¾èµ–é¡¹çš„å‰åæ¯”è¾ƒã€‚å¦‚æœæ˜¯å€¼ç±»å‹ï¼Œåˆ™ä¸å¦¨ç¢ã€‚å¦‚æœæ˜¯å¼•ç”¨ç±»å‹ï¼Œå‰åçš„å€¼æ˜¯ä¸ä¸€æ ·çš„ï¼ˆçº¯å‡½æ•°ï¼Œæ¯æ¬¡æ–°å»ºå€¼ï¼‰ï¼Œå°±ç±»ä¼¼ &#123;x:100&#125; !== &#123;x:100&#125; 123useEffect(() =&gt; &#123; // ...&#125;, [obj, arr]) React é”™è¯¯ç›‘å¬ ErrorBoundary","categories":[],"tags":[]},{"title":"vueåŸºç¡€","slug":"vueåŸºç¡€","date":"2023-04-05T02:41:49.000Z","updated":"2023-04-06T05:59:20.293Z","comments":true,"path":"2023/04/05/vueåŸºç¡€/","link":"","permalink":"https://github.com/zheng521/2023/04/05/vue%E5%9F%BA%E7%A1%80/","excerpt":"","text":"vue ç”Ÿå‘½å‘¨æœŸ beforeCreateåˆå§‹åŒ–ä¸€ä¸ªç©ºçš„ Vue å®ä¾‹ï¼Œdata methods ç­‰å°šæœªè¢«åˆå§‹åŒ–ï¼Œæ— æ³•è°ƒç”¨ã€‚ createdVue å®ä¾‹åˆå§‹åŒ–å®Œæˆï¼Œdata methods éƒ½å·²åˆå§‹åŒ–å®Œæˆï¼Œå¯è°ƒç”¨ã€‚ä½†å°šæœªå¼€å§‹æ¸²æŸ“æ¨¡æ¿ã€‚ beforeMountç¼–è¯‘æ¨¡æ¿ï¼Œè°ƒç”¨ render å‡½æ•°ç”Ÿæˆ vdom ï¼Œä½†è¿˜æ²¡æœ‰å¼€å§‹æ¸²æŸ“ DOM mountedæ¸²æŸ“ DOM å®Œæˆï¼Œé¡µé¢æ›´æ–°ã€‚ç»„ä»¶åˆ›å»ºå®Œæˆï¼Œå¼€å§‹è¿›å…¥è¿è¡Œé˜¶æ®µã€‚ beforeUpdateåœ¨æ•°æ®å‘ç”Ÿæ”¹å˜åï¼ŒDOM è¢«æ›´æ–°ä¹‹å‰è¢«è°ƒç”¨ã€‚è¿™é‡Œé€‚åˆåœ¨ç°æœ‰ DOM å°†è¦è¢«æ›´æ–°ä¹‹å‰è®¿é—®å®ƒï¼Œæ¯”å¦‚ç§»é™¤æ‰‹åŠ¨æ·»åŠ çš„äº‹ä»¶ç›‘å¬å™¨ã€‚ updatedåœ¨æ•°æ®æ›´æ”¹å¯¼è‡´çš„è™šæ‹Ÿ DOM é‡æ–°æ¸²æŸ“å’Œæ›´æ–°å®Œæ¯•ä¹‹åè¢«è°ƒç”¨ã€‚ æ³¨æ„ï¼Œå°½é‡ä¸è¦åœ¨ updated ä¸­ç»§ç»­ä¿®æ”¹æ•°æ®ï¼Œå¦åˆ™å¯èƒ½ä¼šè§¦å‘æ­»å¾ªç¯ã€‚ onActivatedè¢« keep-alive ç¼“å­˜çš„ç»„ä»¶æ¿€æ´»æ—¶è°ƒç”¨ã€‚ onDeactivatedè¢« keep-alive ç¼“å­˜çš„ç»„ä»¶åœç”¨æ—¶è°ƒç”¨ã€‚ beforeUnmountç»„ä»¶è¿›å…¥é”€æ¯é˜¶æ®µã€‚ å¸è½½ç»„ä»¶å®ä¾‹åè°ƒç”¨ï¼Œåœ¨è¿™ä¸ªé˜¶æ®µï¼Œå®ä¾‹ä»ç„¶æ˜¯å®Œå…¨æ­£å¸¸çš„ã€‚ç§»é™¤ã€è§£ç»‘ä¸€äº›å…¨å±€äº‹ä»¶ã€è‡ªå®šä¹‰äº‹ä»¶ï¼Œå¯ä»¥åœ¨æ­¤æ—¶æ“ä½œã€‚ unmountedå¸è½½ç»„ä»¶å®ä¾‹åè°ƒç”¨ã€‚è°ƒç”¨æ­¤é’©å­æ—¶ï¼Œç»„ä»¶å®ä¾‹çš„æ‰€æœ‰æŒ‡ä»¤éƒ½è¢«è§£é™¤ç»‘å®šï¼Œæ‰€æœ‰äº‹ä»¶ä¾¦å¬å™¨éƒ½è¢«ç§»é™¤ï¼Œæ‰€æœ‰å­ç»„ä»¶å®ä¾‹è¢«å¸è½½ã€‚ è¿ç¯é—®ï¼šå¦‚ä½•æ­£ç¡®çš„æ“ä½œ DOMmounted å’Œ updated éƒ½ä¸ä¼šä¿è¯æ‰€æœ‰å­ç»„ä»¶éƒ½æŒ‚è½½å®Œæˆï¼Œå¦‚æœæƒ³ç­‰å¾…æ‰€æœ‰è§†å›¾éƒ½æ¸²æŸ“å®Œæˆï¼Œéœ€è¦ä½¿ç”¨ $nextTick 12345mounted() &#123; this.$nextTick(function () &#123; // ä»…åœ¨æ•´ä¸ªè§†å›¾éƒ½è¢«æ¸²æŸ“ä¹‹åæ‰ä¼šè¿è¡Œçš„ä»£ç  &#125;)&#125; è¿ç¯é—®ï¼šajax æ”¾åœ¨å“ªä¸ªç”Ÿå‘½å‘¨æœŸåˆé€‚ï¼Ÿä¸€èˆ¬æœ‰ä¸¤ä¸ªé€‰æ‹©ï¼šcreated å’Œ mounted ï¼Œå»ºè®®é€‰æ‹©åè€… mounted ã€‚ æ‰§è¡Œé€Ÿåº¦ ä»ç†è®ºä¸Šæ¥è¯´ï¼Œæ”¾åœ¨ created ç¡®å®ä¼šå¿«ä¸€äº› ä½† ajax æ˜¯ç½‘ç»œè¯·æ±‚ï¼Œå…¶æ—¶é—´æ˜¯ä¸»è¦çš„å½±å“å› ç´ ã€‚ä» created åˆ° mounted æ˜¯ JS æ‰§è¡Œï¼Œé€Ÿåº¦éå¸¸å¿«ã€‚ æ‰€ä»¥ï¼Œä¸¤è€…åœ¨æ‰§è¡Œé€Ÿåº¦ä¸Šä¸ä¼šæœ‰è‚‰çœ¼å¯è§çš„å·®è· ä»£ç çš„é˜…è¯»å’Œç†è§£ æ”¾åœ¨ created å´ä¼šå¸¦æ¥ä¸€äº›æ²Ÿé€šå’Œç†è§£æˆæœ¬ï¼Œä»ä»£ç çš„æ‰§è¡Œä¸Šæ¥çœ‹ï¼Œå®ƒä¼šä¸€è¾¹æ‰§è¡Œç»„ä»¶æ¸²æŸ“ï¼Œä¸€è¾¹è§¦å‘ç½‘ç»œè¯·æ±‚ï¼Œå¹¶è¡Œ æ”¾åœ¨ mounted å°±æ˜¯ç­‰å¾… DOM æ¸²æŸ“å®Œæˆå†æ‰§è¡Œç½‘ç»œè¯·æ±‚ï¼Œä¸²è¡Œï¼Œå¥½ç†è§£ æ‰€ä»¥ï¼Œç»¼åˆæ¥çœ‹ï¼Œæ›´å»ºè®®é€‰æ‹© mounted ã€‚ è¿ç¯é—®ï¼šComposition API ç”Ÿå‘½å‘¨æœŸæœ‰ä½•ä¸åŒ setup ä»£æ›¿äº† beforeCreate å’Œ created ç”Ÿå‘½å‘¨æœŸæ¢æˆäº†å‡½æ•°çš„å½¢å¼ï¼Œå¦‚ mounted -&gt; onMounted å‚è€ƒ https://v3.cn.vuejs.org/api/composition-api.html#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%92%A9%E5%AD%90 123456789101112import &#123; onUpdated, onMounted &#125; from &#x27;vue&#x27;export default &#123; setup() &#123; onMounted(() =&gt; &#123; console.log(&#x27;mounted&#x27;) &#125;) onUpdated(() =&gt; &#123; console.log(&#x27;updated&#x27;) &#125;) &#125; &#125; çˆ¶å­ç”Ÿå‘½å‘¨æœŸæµç¨‹åŠ è½½æ¸²æŸ“è¿‡ç¨‹1çˆ¶beforeCreate-&gt;çˆ¶created-&gt;çˆ¶beforeMount-&gt;å­beforeCreate-&gt;å­created-&gt;å­beforeMount-&gt;å­mounted-&gt;çˆ¶mounted æ›´æ–°è¿‡ç¨‹1çˆ¶beforeUpdate-&gt;å­beforeUpdate-&gt;å­updated-&gt;çˆ¶updated é”€æ¯è¿‡ç¨‹1çˆ¶beforeDestroy-&gt;å­beforeDestroy-&gt;å­destroyed-&gt;çˆ¶destroyed Vue ä¼˜åŒ– v-if å’Œ v-show v-for ä½¿ç”¨ key computed ç¼“å­˜ keep-alive å¼‚æ­¥ç»„ä»¶ è·¯ç”±æ‡’åŠ è½½ SSR Vueé‡åˆ°çš„å‘å…¨å±€äº‹ä»¶ã€è‡ªå®šä¹‰äº‹ä»¶è¦åœ¨ç»„ä»¶é”€æ¯æ—¶è§£é™¤ç»‘å®š å†…å­˜æ³„æ¼é£é™© å…¨å±€äº‹ä»¶ï¼ˆå¦‚ window.resizeï¼‰ä¸è§£é™¤ï¼Œåˆ™ä¼šç»§ç»­ç›‘å¬ï¼Œè€Œä¸”ç»„ä»¶å†æ¬¡åˆ›å»ºæ—¶ä¼šé‡å¤ç»‘å®š Vue2.x ä¸­ï¼Œæ— æ³•ç›‘å¬ data å±æ€§çš„æ–°å¢å’Œåˆ é™¤ï¼Œä»¥åŠæ•°ç»„çš„éƒ¨åˆ†ä¿®æ”¹ â€”â€” Vue3 ä¸ä¼šæœ‰è¿™ä¸ªé—®é¢˜ æ–°å¢ data å±æ€§ï¼Œéœ€è¦ç”¨ Vue.set åˆ é™¤ data å±æ€§ï¼Œéœ€è¦ç”¨ Vue.delete ä¿®æ”¹æ•°ç»„æŸä¸€å…ƒç´ ï¼Œä¸èƒ½ arr[index] = value ï¼Œè¦ä½¿ç”¨ arr.splice API æ–¹å¼ è·¯ç”±åˆ‡æ¢æ—¶ï¼Œé¡µé¢ä¼š scroll åˆ°é¡¶éƒ¨ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªæ–°é—»åˆ—è¡¨é¡µä¸‹æ»‘åˆ°ä¸€å®šä½ç½®ï¼Œç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µï¼Œåœ¨è¿”å›åˆ—è¡¨é¡µï¼Œæ­¤æ—¶ä¼š scroll åˆ°é¡¶éƒ¨ï¼Œå¹¶é‡æ–°æ¸²æŸ“åˆ—è¡¨é¡µã€‚æ‰€æœ‰çš„ SPA éƒ½ä¼šæœ‰è¿™ä¸ªé—®é¢˜ï¼Œå¹¶ä¸ä»…ä»…æ˜¯ Vue ã€‚ åœ¨åˆ—è¡¨é¡µç¼“å­˜æ•°æ®å’Œ scrollTop è¿”å›åˆ—è¡¨é¡µæ—¶ï¼ˆç”¨ Vue-router å¯¼èˆªå®ˆå«ï¼Œåˆ¤æ–­ fromï¼‰ï¼Œä½¿ç”¨ç¼“å­˜æ•°æ®æ¸²æŸ“é¡µé¢ï¼Œç„¶å scrollTo(scrollTop) Vue é”™è¯¯ç›‘å¬ window.onerror errorCaptured ç”Ÿå‘½å‘¨æœŸ ä¼šç›‘å¬æ‰€æœ‰ä¸‹çº§ç»„ä»¶çš„é”™è¯¯ã€‚å¯ä»¥è¿”å› false é˜»æ­¢å‘ä¸Šä¼ æ’­ï¼Œå› ä¸ºå¯èƒ½ä¼šæœ‰å¤šä¸ªä¸Šçº§èŠ‚ç‚¹éƒ½ç›‘å¬é”™è¯¯ã€‚ 123errorCaptured(error, instance, info) &#123; console.log(&#x27;errorCaptured--------&#x27;, error, instance, info)&#125; errorHandler å…¨å±€çš„é”™è¯¯ç›‘å¬ï¼Œæ‰€æœ‰ç»„ä»¶çš„æŠ¥é”™éƒ½ä¼šæ±‡æ€»åˆ°è¿™é‡Œæ¥ã€‚PSï¼šå¦‚æœ errorCaptured è¿”å› false åˆ™ä¸ä¼šåˆ°è¿™é‡Œã€‚ 1234const app = createApp(App)app.config.errorHandler = (error, instance, info) =&gt; &#123; console.log(&#x27;errorHandler--------&#x27;, error, instance, info)&#125; è¯·æ³¨æ„ï¼ŒerrorHandler ä¼šé˜»æ­¢é”™è¯¯èµ°å‘ window.onerrorã€‚ Promise ç›‘å¬æŠ¥é”™è¦ä½¿ç”¨ window.onunhandledrejection","categories":[],"tags":[]},{"title":"å‰ç«¯åŸºç¡€","slug":"å‰ç«¯åŸºç¡€","date":"2023-04-04T14:14:21.000Z","updated":"2023-04-06T06:27:14.044Z","comments":true,"path":"2023/04/04/å‰ç«¯åŸºç¡€/","link":"","permalink":"https://github.com/zheng521/2023/04/04/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/","excerpt":"","text":"ç®­å¤´å‡½æ•°çš„ç¼ºç‚¹é¢˜ç›®ä»€ä¹ˆæ—¶å€™ä¸èƒ½ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Ÿ ç®­å¤´å‡½æ•°çš„ç¼ºç‚¹æ²¡æœ‰ arguments 1234const fn1 = () =&gt; &#123; console.log(&#x27;this&#x27;, arguments) // æŠ¥é”™ï¼Œarguments is not defined&#125;fn1(100, 200) æ— æ³•é€šè¿‡ call apply bind ç­‰æ”¹å˜ this 1234const fn1 = () =&gt; &#123; console.log(&#x27;this&#x27;, this) // window&#125;fn1.call(&#123; x: 100 &#125;) ç®€å†™çš„å‡½æ•°ä¼šå˜å¾—éš¾ä»¥é˜…è¯» 1const multiply = (a, b) =&gt; b === undefined ? b =&gt; a * b : a * b ä¸é€‚ç”¨ç®­å¤´å‡½æ•°çš„åœºæ™¯å¯¹è±¡æ–¹æ³• 1234567const obj = &#123; name: &#x27;å¼ ä¸‰&#x27;, getName: () =&gt; &#123; return this.name &#125;&#125;console.log( obj.getName() ) æ‰©å±•å¯¹è±¡åŸå‹ï¼ˆåŒ…æ‹¬æ„é€ å‡½æ•°çš„åŸå‹ï¼‰ 1234567const obj = &#123; name: &#x27;å¼ ä¸‰&#x27;&#125;obj.__proto__.getName = () =&gt; &#123; return this.name&#125;console.log( obj.getName() ) æ„é€ å‡½æ•° 12345const Foo = (name, age) =&gt; &#123; this.name = name this.age = age&#125;const f = new Foo(&#x27;å¼ ä¸‰&#x27;, 20) // æŠ¥é”™ Foo is not a constructor åŠ¨æ€ä¸Šä¸‹æ–‡ä¸­çš„å›è°ƒå‡½æ•° 12345const btn1 = document.getElementById(&#x27;btn1&#x27;)btn1.addEventListener(&#x27;click&#x27;, () =&gt; &#123; // console.log(this === window) this.innerHTML = &#x27;clicked&#x27;&#125;) Vue ç”Ÿå‘½å‘¨æœŸå’Œæ–¹æ³• 12345678910111213141516171819&#123; data() &#123; return &#123; name: &#x27;å¼ ä¸‰&#x27; &#125; &#125;, methods: &#123; getName: () =&gt; &#123; // æŠ¥é”™ Cannot read properties of undefined (reading &#x27;name&#x27;) return this.name &#125;, // getName() &#123; // return this.name // æ­£å¸¸ // &#125; &#125;, mounted: () =&gt; &#123; // æŠ¥é”™ Cannot read properties of undefined (reading &#x27;name&#x27;) console.log(&#x27;msg&#x27;, this.name) &#125;, // mounted() &#123; // console.log(&#x27;msg&#x27;, this.name) // æ­£å¸¸ // &#125;&#125; ã€æ³¨æ„ã€‘class ä¸­ä½¿ç”¨ç®­å¤´å‡½æ•°åˆ™æ²¡é—®é¢˜ 1234567891011class Foo &#123; constructor(name, age) &#123; this.name = name this.age = age &#125; getName = () =&gt; &#123; return this.name &#125;&#125;const f = new Foo(&#x27;å¼ ä¸‰&#x27;, 20)console.log(&#x27;getName&#x27;, f.getName()) æ‰€ä»¥ï¼Œåœ¨ React ä¸­å¯ä»¥ä½¿ç”¨ç®­å¤´å‡½æ•° 1234567891011121314export default class HelloWorld extends React.Component &#123; constructor(props) &#123; super(props) this.state = &#123; name: &#x27;å¼ ä¸‰&#x27; &#125; &#125; render() &#123; return &lt;p onClick=&#123;this.printName&#125;&gt;hello world&lt;/p&gt; &#125; printName = () =&gt; &#123; console.log(this.state.name) &#125;&#125; ç­”æ¡ˆç®­å¤´å‡½æ•°çš„ç¼ºç‚¹ arguments å‚æ•° æ— æ³•æ”¹å˜ this ä¸é€‚ç”¨çš„åœºæ™¯ å¯¹è±¡æ–¹æ³• å¯¹è±¡åŸå‹ æ„é€ å‡½æ•° åŠ¨æ€ä¸Šä¸‹æ–‡ Vue ç”Ÿå‘½å‘¨æœŸå’Œæ–¹æ³• forâ€¦in å’Œ forâ€¦of çš„åŒºåˆ«é¢˜ç›®forâ€¦in å’Œ forâ€¦of çš„åŒºåˆ« key å’Œ valueforâ€¦in éå† key , forâ€¦of éå† value 123456789const arr = [10, 20, 30]for (let n of arr) &#123; console.log(n)&#125;const str = &#x27;abc&#x27;for (let s of str) &#123; console.log(s)&#125; 1234567891011function fn() &#123; for (let argument of arguments) &#123; console.log(argument) // for...of å¯ä»¥è·å– value ï¼Œè€Œ for...in è·å– key &#125;&#125;fn(10, 20, 30)const pList = document.querySelectorAll(&#x27;p&#x27;)for (let p of pList) &#123; console.log(p) // for...of å¯ä»¥è·å– value ï¼Œè€Œ for...in è·å– key&#125; éå†å¯¹è±¡forâ€¦in å¯ä»¥éå†å¯¹è±¡ï¼Œforâ€¦of ä¸å¯ä»¥ éå† Map&#x2F;Setforâ€¦of å¯ä»¥éå† Map&#x2F;Set ï¼Œforâ€¦in ä¸å¯ä»¥ 1234567891011const set1 = new Set([10, 20, 30])for (let n of set1) &#123; console.log(n)&#125;let map1 = new Map([ [&#x27;x&#x27;, 10], [&#x27;y&#x27;, 20], [&#x27;z&#x27;, 3]])for (let n of map1) &#123; console.log(n)&#125; éå† generatorforâ€¦of å¯éå† generator ï¼Œforâ€¦in ä¸å¯ä»¥ 12345678function* foo()&#123; yield 10 yield 20 yield 30&#125;for (let o of foo()) &#123; console.log(o)&#125; å¯¹è±¡çš„å¯æšä¸¾å±æ€§forâ€¦in éå†ä¸€ä¸ªå¯¹è±¡çš„å¯æšä¸¾å±æ€§ã€‚ ä½¿ç”¨ Object.getOwnPropertyDescriptors(obj) å¯ä»¥è·å–å¯¹è±¡çš„æ‰€æœ‰å±æ€§æè¿°ï¼Œçœ‹ enumerable: true æ¥åˆ¤æ–­è¯¥å±æ€§æ˜¯å¦å¯æšä¸¾ã€‚ å¯¹è±¡ï¼Œæ•°ç»„ï¼Œå­—ç¬¦ä¼  å¯è¿­ä»£å¯¹è±¡forâ€¦of éå†ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ã€‚å…¶å®å°±æ˜¯è¿­ä»£å™¨æ¨¡å¼ï¼Œé€šè¿‡ä¸€ä¸ª next æ–¹æ³•è¿”å›ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚ è¯¥å¯¹è±¡è¦å®ç°ä¸€ä¸ª [Symbol.iterator] æ–¹æ³•ï¼Œå…¶ä¸­è¿”å›ä¸€ä¸ª next å‡½æ•°ï¼Œç”¨äºè¿”å›ä¸‹ä¸€ä¸ª valueï¼ˆä¸æ˜¯ keyï¼‰ã€‚å¯ä»¥æ‰§è¡Œ arr[Symbol.iterator]() çœ‹ä¸€ä¸‹ã€‚ JS ä¸­å†…ç½®è¿­ä»£å™¨çš„ç±»å‹æœ‰ String Array arguments NodeList Map Set generator ç­‰ã€‚ ç­”æ¡ˆ forâ€¦in éå†ä¸€ä¸ªå¯¹è±¡çš„å¯æšä¸¾å±æ€§ï¼Œå¦‚å¯¹è±¡ã€æ•°ç»„ã€å­—ç¬¦ä¸²ã€‚é’ˆå¯¹å±æ€§ï¼Œæ‰€ä»¥è·å¾— key forâ€¦of éå†ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œå¦‚æ•°ç»„ã€å­—ç¬¦ä¸²ã€Map&#x2F;Set ã€‚é’ˆå¯¹ä¸€ä¸ªè¿­ä»£å¯¹è±¡ï¼Œæ‰€ä»¥è·å¾— value åˆ’é‡ç‚¹â€œæšä¸¾â€ â€œè¿­ä»£â€ éƒ½æ˜¯è®¡ç®—æœºè¯­è¨€çš„ä¸€äº›åŸºç¡€æœ¯è¯­ï¼Œç›®å‰æä¸æ‡‚ä¹Ÿæ²¡å…³ç³»ã€‚ä½†è¯·ä¸€å®šè®°ä½ forâ€¦of å’Œ forâ€¦in çš„ä¸åŒè¡¨ç°ã€‚ è¿ç¯é—®ï¼šfor awaitâ€¦ofç”¨äºéå†å¼‚æ­¥è¯·æ±‚çš„å¯è¿­ä»£å¯¹è±¡ã€‚ 12345678// åƒå®šä¹‰ä¸€ä¸ªåˆ›å»º promise çš„å‡½æ•°function createTimeoutPromise(val) &#123; return new Promise(resolve =&gt; &#123; setTimeout(() =&gt; &#123; resolve(val) &#125;, 1000) &#125;)&#125; å¦‚æœä½ æ˜ç¡®çŸ¥é“æœ‰å‡ ä¸ª promise å¯¹è±¡ï¼Œé‚£ç›´æ¥å¤„ç†å³å¯ 123456789(async function () &#123; const p1 = createTimeoutPromise(10) const p2 = createTimeoutPromise(20) const v1 = await p1 console.log(v1) const v2 = await p2 console.log(v2)&#125;)() å¦‚æœä½ æœ‰ä¸€ä¸ªå¯¹è±¡ï¼Œé‡Œé¢æœ‰ N ä¸ª promise å¯¹è±¡ï¼Œä½ å¯ä»¥è¿™æ ·å¤„ç† 12345678910111213141516(async function () &#123; const list = [ createTimeoutPromise(10), createTimeoutPromise(20) ] // ç¬¬ä¸€ï¼Œä½¿ç”¨ Promise.all æ‰§è¡Œ Promise.all(list).then(res =&gt; console.log(res)) // ç¬¬äºŒï¼Œä½¿ç”¨ for await ... of éå†æ‰§è¡Œ for await (let p of list) &#123; console.log(p) &#125; // æ³¨æ„ï¼Œå¦‚æœç”¨ for...of åªèƒ½éå†å‡ºå„ä¸ª promise å¯¹è±¡ï¼Œè€Œä¸èƒ½è§¦å‘ await æ‰§è¡Œ&#125;)() ã€æ³¨æ„ã€‘å¦‚æœä½ æƒ³é¡ºåºæ‰§è¡Œï¼Œåªèƒ½å»¶è¿Ÿåˆ›å»º promise å¯¹è±¡ï¼Œè€Œä¸èƒ½åŠæ—©åˆ›å»ºã€‚å³ï¼Œä½ åˆ›å»ºäº† promise å¯¹è±¡ï¼Œå®ƒå°±ç«‹åˆ»å¼€å§‹æ‰§è¡Œé€»è¾‘ã€‚ 1234567891011(async function () &#123; const v1 = await createTimeoutPromise(10) console.log(v1) const v2 = await createTimeoutPromise(20) console.log(v2) for (let n of [100, 200]) &#123; const v = await createTimeoutPromise(n) console.log(&#x27;v&#x27;, v) &#125;&#125;)() HTMLCollection å’Œ NodeList çš„åŒºåˆ«é¢˜ç›®HTMLCollection å’Œ NodeList çš„åŒºåˆ«ï¼ŒNode å’Œ Element çš„åŒºåˆ« Node å’Œ ElementDOM ç»“æ„æ˜¯ä¸€æ£µæ ‘ï¼Œæ ‘çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½æ˜¯ Node ï¼ŒåŒ…æ‹¬ï¼šdocumentï¼Œå…ƒç´ ï¼Œæ–‡æœ¬ï¼Œæ³¨é‡Šï¼Œfragment ç­‰ Element ç»§æ‰¿äº Node ã€‚å®ƒæ˜¯æ‰€æœ‰ html å…ƒç´ çš„åŸºç±»ï¼Œå¦‚ HTMLParagraphElement HTMLDivElement 1234567891011121314151617class Node &#123;&#125;// documentclass Document extends Node &#123;&#125;class DocumentFragment extends Node &#123;&#125;// æ–‡æœ¬å’Œæ³¨é‡Šclass CharacterData extends Node &#123;&#125;class Comment extends CharacterData &#123;&#125;class Text extends CharacterData &#123;&#125;// elemclass Element extends Node &#123;&#125;class HTMLElement extends Element &#123;&#125;class HTMLParagraphElement extends HTMLElement &#123;&#125;class HTMLDivElement extends HTMLElement &#123;&#125;// ... å…¶ä»– elem ... HTMLCollection å’Œ NodeListHTMLCollection æ˜¯ Element é›†åˆï¼Œå®ƒç”±è·å– Element çš„ API è¿”å› elem.children document.getElementsByTagName(&#39;p&#39;) NodeList æ˜¯ Node é›†åˆï¼Œå®ƒç”±è·å– Node çš„ API è¿”å› document.querySelectorAll(&#39;p&#39;) elem.childNodes ç­”æ¡ˆ HTMLCollection æ˜¯ Element é›†åˆï¼ŒNodeList æ˜¯ Node é›†åˆ Node æ˜¯æ‰€æœ‰ DOM èŠ‚ç‚¹çš„åŸºç±»ï¼ŒElement æ˜¯ html å…ƒç´ çš„åŸºç±» åˆ’é‡ç‚¹æ³¨æ„ Node å’Œ Element åœ¨å®é™… API ä¸­çš„åŒºåˆ«ï¼Œå¦‚ children å’Œ childNodes è·å–çš„ç»“æœå¯èƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼ˆå¦‚æœå­èŠ‚ç‚¹æœ‰ Text æˆ– Commentï¼‰ æ‰©å±•ï¼šç±»æ•°ç»„HTMLCollection å’Œ NodeList éƒ½ä¸æ˜¯æ•°ç»„ï¼Œè€Œæ˜¯â€œç±»æ•°ç»„â€ã€‚è½¬æ¢ä¸ºæ•°ç»„ï¼š 1234// HTMLCollection å’Œ NodeList éƒ½ä¸æ˜¯æ•°ç»„ï¼Œè€Œæ˜¯â€œç±»æ•°ç»„â€const arr1 = Array.from(list)const arr2 = Array.prototype.slice.call(list)const arr3 = [...list] JS ä¸¥æ ¼æ¨¡å¼å’Œéä¸¥æ ¼æ¨¡å¼é¢˜ç›®JS ä¸¥æ ¼æ¨¡å¼å’Œéä¸¥æ ¼æ¨¡å¼çš„åŒºåˆ« è®¾è®¡åˆè¡·Javascript è®¾è®¡ä¹‹åˆï¼Œæœ‰å¾ˆå¤šä¸åˆç†ã€ä¸ä¸¥è°¨ã€ä¸å®‰å…¨ä¹‹å¤„ï¼Œä¾‹å¦‚å˜é‡æœªå®šä¹‰å³å¯ä½¿ç”¨ n = 100ã€‚ä¸¥æ ¼æ¨¡å¼ç”¨äºè§„é¿è¿™äº›é—®é¢˜ã€‚ è€Œç°åœ¨ ES è§„èŒƒå·²ç»æ™®åŠï¼Œä»è¯­æ³•ä¸Šå·²ç»è§„é¿äº†è¿™äº›é—®é¢˜ã€‚ å¼€å¯ä¸¥æ ¼æ¨¡å¼ä»£ç ï¼ˆæˆ–ä¸€ä¸ªå‡½æ•°ï¼‰ä¸€å¼€å§‹æ’å…¥ä¸€è¡Œ &#39;use strict&#39; å³å¯å¼€å¯ä¸¥æ ¼æ¨¡å¼ 123456&#x27;use strict&#x27; // å…¨å±€å¼€å¯function fn() &#123; &#x27;use strict&#x27; // æŸä¸ªå‡½æ•°å¼€å¯&#125; ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¼€å‘ç¯å¢ƒç”¨ ES æˆ–è€… Typescript ï¼Œæ‰“åŒ…å‡ºçš„ js ä»£ç ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼ ä¸¥æ ¼æ¨¡å¼çš„ä¸åŒä¸¥æ ¼æ¨¡å¼çš„ç»†åˆ™æœ‰å¾ˆå¤šï¼Œè¿™é‡Œæ€»ç»“ä¸€äº›å¸¸ç”¨å¸¸è§çš„ å…¨å±€å˜é‡å¿…é¡»å£°æ˜12&#x27;use strict&#x27;n = 10 // ReferenceError: n is not defined ç¦æ­¢ä½¿ç”¨ with123456&#x27;use strict&#x27;var obj = &#123; x: 10 &#125;with (obj) &#123; // Uncaught SyntaxError: Strict mode code may not include a with statement console.log(x)&#125; åˆ›å»º eval ä½œç”¨åŸŸæ­£å¸¸æ¨¡å¼ä¸‹ï¼ŒJS åªæœ‰ä¸¤ç§å˜é‡ä½œç”¨åŸŸï¼šå…¨å±€ä½œç”¨åŸŸ + å‡½æ•°ä½œç”¨åŸŸã€‚ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ŒJS å¢åŠ äº† eval ä½œç”¨åŸŸã€‚ chrome éšç§æ¨¡å¼ä¸‹æ‰§è¡Œè¿™æ®µä»£ç ï¼Ÿï¼Ÿï¼Ÿ 1234&#x27;use strict&#x27;var x = 10eval(&#x27;var x = 20; console.log(x)&#x27;)console.log(x) ç¦æ­¢ this æŒ‡å‘å…¨å±€ä½œç”¨åŸŸ12345&#x27;use strict&#x27;function fn() &#123; console.log(&#x27;this&#x27;, this) // undefined&#125;fn() å‡½æ•°å‚æ•°ä¸èƒ½é‡å123456&#x27;use strict&#x27;// Uncaught SyntaxError: Duplicate parameter name not allowed in this contextfunction fn(x, x, y) &#123; return&#125; ç­”æ¡ˆ å…¨å±€å˜é‡å¿…é¡»å£°æ˜ ç¦æ­¢ä½¿ç”¨ with åˆ›å»º eval ä½œç”¨åŸŸ ç¦æ­¢ this æŒ‡å‘å…¨å±€ä½œç”¨åŸŸ å‡½æ•°å‚æ•°ä¸èƒ½é‡å options è¯·æ±‚é¢˜ç›®è·¨åŸŸä¸ºä½•éœ€è¦ options è¯·æ±‚ï¼Ÿ è·¨åŸŸæµè§ˆå™¨åŒæºç­–ç•¥ï¼Œé»˜è®¤é™åˆ¶è·¨åŸŸè¯·æ±‚ã€‚è·¨åŸŸçš„è§£å†³æ–¹æ¡ˆ jsonp CORS 12345// CORS é…ç½®å…è®¸è·¨åŸŸï¼ˆæœåŠ¡ç«¯ï¼‰response.setHeader(&quot;Access-Control-Allow-Origin&quot;, &quot;http://localhost:8011&quot;) // æˆ–è€… &#x27;*&#x27;response.setHeader(&quot;Access-Control-Allow-Headers&quot;, &quot;X-Requested-With&quot;)response.setHeader(&quot;Access-Control-Allow-Methods&quot;, &quot;PUT,POST,GET,DELETE,OPTIONS&quot;)response.setHeader(&quot;Access-Control-Allow-Credentials&quot;, &quot;true&quot;) // å…è®¸è·¨åŸŸæ¥æ”¶ cookie options è¯·æ±‚ä½¿ç”¨ CORS è·¨åŸŸè¯·æ±‚æ—¶ï¼Œç»å¸¸ä¼šçœ‹åˆ°ä¸€ä¸ªâ€œå¤šä½™â€çš„ options è¯·æ±‚ï¼Œä¹‹åæ‰å‘é€äº†å®é™…çš„è¯·æ±‚ã€‚ è¯¥è¯·æ±‚å°±æ˜¯ä¸ºäº†æ£€æŸ¥æœåŠ¡ç«¯çš„ headers ä¿¡æ¯ï¼Œæ˜¯å¦ç¬¦åˆå®¢æˆ·ç«¯çš„é¢„æœŸã€‚æ‰€ä»¥å®ƒæ²¡æœ‰ body çš„è¿”å›ã€‚ è§„èŒƒè¦æ±‚ï¼Œå¯¹é‚£äº›å¯èƒ½å¯¹æœåŠ¡å™¨æ•°æ®äº§ç”Ÿå‰¯ä½œç”¨çš„ HTTP è¯·æ±‚æ–¹æ³•ï¼ˆç‰¹åˆ«æ˜¯ GET ä»¥å¤–çš„ HTTP è¯·æ±‚ï¼Œæˆ–è€…æ­é…æŸäº› MIME ç±»å‹çš„ POST è¯·æ±‚ï¼‰ï¼Œæµè§ˆå™¨å¿…é¡»é¦–å…ˆä½¿ç”¨ OPTIONS æ–¹æ³•å‘èµ·ä¸€ä¸ªé¢„æ£€è¯·æ±‚ï¼ˆpreflight requestï¼‰ï¼Œä»è€Œè·çŸ¥æœåŠ¡ç«¯æ˜¯å¦å…è®¸è¯¥è·¨åŸŸè¯·æ±‚ã€‚â€”â€” MDN ç­”æ¡ˆoptions è¯·æ±‚å°±æ˜¯å¯¹ CORS è·¨åŸŸè¯·æ±‚ä¹‹é—´çš„ä¸€æ¬¡é¢„æ£€æŸ¥ï¼Œæ£€æŸ¥æˆåŠŸå†å‘èµ·æ­£å¼è¯·æ±‚ï¼Œæ˜¯æµè§ˆå™¨è‡ªè¡Œå¤„ç†çš„ã€‚äº†è§£å³å¯ï¼Œå®é™…å¼€å‘ä¸­ä¸ç”¨è¿‡äºå…³æ³¨ã€‚ js åŸå‹é“¾ &#x3D;&#x3D; æ¯”è¾ƒ æ•°ç»„æ–¹æ³• å‰ç«¯é¦–å±åŠ è½½ä¼˜åŒ– https åŠ å¯†è¿‡ç¨‹","categories":[],"tags":[]},{"title":"è¾“å‡ºä»€ä¹ˆ","slug":"è¾“å‡ºä»€ä¹ˆ","date":"2023-04-04T13:49:17.000Z","updated":"2023-04-04T14:09:57.469Z","comments":true,"path":"2023/04/04/è¾“å‡ºä»€ä¹ˆ/","link":"","permalink":"https://github.com/zheng521/2023/04/04/%E8%BE%93%E5%87%BA%E4%BB%80%E4%B9%88/","excerpt":"","text":"é¢˜ç›®[1,2,3].map(parseInt)è¾“å‡ºä»€ä¹ˆ è§£æparseInt(string, radix) è§£æä¸€ä¸ªå­—ç¬¦ä¸²å¹¶è¿”å›æŒ‡å®šåŸºæ•°çš„åè¿›åˆ¶æ•´æ•° string è¦è§£æçš„å­—ç¬¦ä¸² radix å¯é€‰å‚æ•°ï¼Œæ•°å­—åŸºæ•°ï¼ˆå³è¿›åˆ¶ï¼‰ï¼ŒèŒƒå›´ä¸º 2-36 ç¤ºä¾‹ 1234567891011parseInt(&#x27;11&#x27;, 1) // NaN ï¼Œ1 éæ³•ï¼Œä¸åœ¨ 2-36 èŒƒå›´ä¹‹å†…parseInt(&#x27;11&#x27;, 2) // 3 = 1*2 + 1parseInt(&#x27;3&#x27;, 2) // NaN ï¼Œ2 è¿›åˆ¶ä¸­ä¸å­˜åœ¨ 3parseInt(&#x27;11&#x27;, 3) // 4 = 1*3 + 1parseInt(&#x27;11&#x27;, 8) // 9 = 1*8 + 1parseInt(&#x27;9&#x27;, 8) // NaN ï¼Œ8 è¿›åˆ¶ä¸­ä¸å­˜åœ¨ 9parseInt(&#x27;11&#x27;, 10) // 11parseInt(&#x27;A&#x27;, 16) // 10 ï¼Œè¶…è¿‡ 10 è¿›åˆ¶ï¼Œä¸ªä½æ•°å°±æ˜¯ 1 2 3 4 5 6 7 8 9 A B C D ...parseInt(&#x27;F&#x27;, 16) // 15parseInt(&#x27;G&#x27;, 16) // NaN ï¼Œ16 è¿›åˆ¶ä¸ªä½æ•°æœ€å¤šæ˜¯ F ï¼Œä¸å­˜åœ¨ GparseInt(&#x27;1F&#x27;, 16) // 31 = 1*16 + F radix &#x3D;&#x3D; null æˆ–è€… radix &#x3D;&#x3D;&#x3D; 0 å¦‚æœ string ä»¥ 0x å¼€å¤´ï¼Œåˆ™æŒ‰ç…§ 16 è¿›åˆ¶å¤„ç†ï¼Œä¾‹å¦‚ parseInt(&#39;0x1F&#39;) ç­‰åŒäº parseInt(&#39;1F&#39;, 16) å¦‚æœ string ä»¥ 0 å¼€å¤´ï¼Œåˆ™æŒ‰ç…§ 8 è¿›åˆ¶å¤„ç† â€”â€” ES5 ä¹‹åå°±å–æ¶ˆäº†ï¼Œæ”¹ä¸ºæŒ‰ 10 è¿›åˆ¶å¤„ç†ï¼Œä½†ä¸æ˜¯æ‰€æœ‰æµè§ˆå™¨éƒ½è¿™æ ·ï¼Œä¸€å®šæ³¨æ„ï¼ï¼ï¼ å…¶ä»–æƒ…å†µï¼ŒæŒ‰ 10 è¿›åˆ¶å¤„ç† åˆ†æä»£ç é¢˜ç›®ä»£ç å¯ä»¥æ‹†è§£ä¸º 123456const arr = [&#x27;1&#x27;, &#x27;2&#x27;, &#x27;3&#x27;]const res = arr.map((s, index) =&gt; &#123; console.log(`s is $&#123;s&#125;, index is $&#123;index&#125;`) return parseInt(s, index)&#125;)console.log(res) åˆ†ææ‰§è¡Œè¿‡ç¨‹ 123parseInt(&#x27;1&#x27;, 0) // 1 ï¼Œradix === 0 æŒ‰ 10 è¿›åˆ¶å¤„ç†parseInt(&#x27;2&#x27;, 1) // NaN ï¼Œradix === 1 éæ³•ï¼ˆä¸åœ¨ 2-36 ä¹‹å†…ï¼‰parseInt(&#x27;3&#x27;, 2) // NaN ï¼Œ2 è¿›åˆ¶ä¸­æ²¡æœ‰ 3 é¢˜ç›®ä»¥ä¸‹ä»£ç ï¼Œæ‰§è¡Œä¼šè¾“å‡ºä»€ä¹ˆï¼Ÿ 1234567891011function Foo() &#123; Foo.a = function() &#123; console.log(1) &#125; this.a = function() &#123; console.log(2) &#125;&#125;Foo.prototype.a = function() &#123; console.log(3) &#125;Foo.a = function() &#123; console.log(4) &#125;Foo.a()let obj = new Foo()obj.a()Foo.a() è§£æï¼šæ‰§è¡Œå®Œnewä»¥å,å‡½æ•°æ‰§è¡Œå†…éƒ¨å‡½æ•°ä½“ä¼šè¦†ç›–åŸæ¥çš„å‡½æ•° ç­”æ¡ˆï¼š 4 2 1 é¢˜ç›®ä»¥ä¸‹ä»£ç ï¼Œæ‰§è¡Œä¼šè¾“å‡ºä»€ä¹ˆï¼Ÿ 123456789101112131415161718Promise.resolve().then(() =&gt; &#123; console.log(0) return Promise.resolve(4)&#125;).then((res) =&gt; &#123; console.log(res)&#125;)Promise.resolve().then(() =&gt; &#123; console.log(1)&#125;).then(() =&gt; &#123; console.log(2)&#125;).then(() =&gt; &#123; console.log(3)&#125;).then(() =&gt; &#123; console.log(5)&#125;).then(() =&gt;&#123; console.log(6)&#125;) è§£æï¼šthen äº¤æ›¿æ‰§è¡Œå¦‚æœæœ‰å¤šä¸ª fulfilled çŠ¶æ€çš„ promise å®ä¾‹ï¼ŒåŒæ—¶æ‰§è¡Œ then é“¾å¼è°ƒç”¨ï¼Œthen ä¼šäº¤æ›¿è°ƒç”¨è¿™æ˜¯ç¼–è¯‘å™¨çš„ä¼˜åŒ–ï¼Œé˜²æ­¢ä¸€ä¸ª promise æŒç»­å æ®äº‹ä»¶ 1234567891011121314151617181920212223242526272829Promise.resolve().then(() =&gt; &#123; console.log(1)&#125;).then(() =&gt; &#123; console.log(2)&#125;).then(() =&gt; &#123; console.log(3)&#125;).then(() =&gt; &#123; console.log(4)&#125;)Promise.resolve().then(() =&gt; &#123; console.log(10)&#125;).then(() =&gt; &#123; console.log(20)&#125;).then(() =&gt; &#123; console.log(30)&#125;).then(() =&gt; &#123; console.log(40)&#125;)Promise.resolve().then(() =&gt; &#123; console.log(100)&#125;).then(() =&gt; &#123; console.log(200)&#125;).then(() =&gt; &#123; console.log(300)&#125;).then(() =&gt; &#123; console.log(400)&#125;) then è¿”å› promise å¯¹è±¡å½“ then è¿”å› promise å¯¹è±¡æ—¶ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯å¤šå‡ºä¸€ä¸ª promise å®ä¾‹ã€‚ 123456789101112131415161718192021222324252627282930313233Promise.resolve().then(() =&gt; &#123; console.log(1) return Promise.resolve(100) // ç›¸å½“äºå¤šå¤„ä¸€ä¸ª promise å®ä¾‹ï¼Œå¦‚ä¸‹æ³¨é‡Šçš„ä»£ç &#125;).then(res =&gt; &#123; console.log(res)&#125;).then(() =&gt; &#123; console.log(200)&#125;).then(() =&gt; &#123; console.log(300)&#125;).then(() =&gt; &#123; console.log(300)&#125;)Promise.resolve().then(() =&gt; &#123; console.log(10)&#125;).then(() =&gt; &#123; console.log(20)&#125;).then(() =&gt; &#123; console.log(30)&#125;).then(() =&gt; &#123; console.log(40)&#125;)// // ç›¸å½“äºæ–°å¢ä¸€ä¸ª promise å®ä¾‹ â€”â€” ä½†è¿™ä¸ªæ‰§è¡Œç»“æœä¸ä¸€æ ·ï¼Œåé¢è§£é‡Š// Promise.resolve(100).then(res =&gt; &#123;// console.log(res)// &#125;).then(() =&gt; &#123;// console.log(200)// &#125;).then(() =&gt; &#123;// console.log(300)// &#125;).then(() =&gt; &#123;// console.log(400)// &#125;) â€œæ…¢ä¸¤æ‹â€then è¿”å› promise å®ä¾‹å’Œç›´æ¥æ‰§è¡Œ Promise.resolve() ä¸ä¸€æ ·ï¼Œå®ƒéœ€è¦ç­‰å¾…ä¸¤ä¸ªè¿‡ç¨‹ promise çŠ¶æ€ç”± pending å˜ä¸º fulfilled then å‡½æ•°æŒ‚è½½åˆ° microTaskQueue æ‰€ä»¥ï¼Œå®ƒå˜ç°çš„ä¼šâ€œæ…¢ä¸¤æ‹â€ã€‚å¯ä»¥ç†è§£ä¸º 123456789101112131415161718192021222324252627282930Promise.resolve().then(() =&gt; &#123; console.log(1)&#125;)Promise.resolve().then(() =&gt; &#123; console.log(10)&#125;).then(() =&gt; &#123; console.log(20)&#125;).then(() =&gt; &#123; console.log(30)&#125;).then(() =&gt; &#123; console.log(40)&#125;)Promise.resolve().then(() =&gt; &#123; // ç¬¬ä¸€æ‹ const p = Promise.resolve(100) Promise.resolve().then(() =&gt; &#123; // ç¬¬äºŒæ‹ p.then(res =&gt; &#123; console.log(res) &#125;).then(() =&gt; &#123; console.log(200) &#125;).then(() =&gt; &#123; console.log(300) &#125;).then(() =&gt; &#123; console.log(400) &#125;) &#125;)&#125;) ç­”æ¡ˆé¢˜ç›®ä»£ç è¾“å‡ºçš„ç»“æœæ˜¯ 1 2 3 4 5 6 é¢˜ç›®React ä¸­ä»¥ä¸‹ä»£ç ä¼šè¾“å‡ºä»€ä¹ˆ 12345678910111213141516171819202122232425262728class Example extends React.Component &#123; constructor() &#123; super() this.state = &#123; val: 0 &#125; &#125; componentDidMount() &#123; // this.state.val åˆå§‹å€¼æ˜¯ 0 this.setState(&#123;val: this.state.val + 1&#125;) console.log(this.state.val) //0 this.setState(&#123;val: this.state.val + 1&#125;) console.log(this.state.val) //0 setTimeout(() =&gt; &#123; this.setState(&#123;val: this.state.val + 1&#125;) console.log(this.state.val) // 2 this.setState(&#123;val: this.state.val + 1&#125;) console.log(this.state.val) // 3 &#125;, 0) &#125; render() &#123; return &lt;p&gt;&#123;this.state.val&#125;&lt;/p&gt; &#125;&#125; setState é»˜è®¤å¼‚æ­¥æ›´æ–°1234567componentDidMount() &#123; this.setState(&#123;val: this.state.val + 1&#125;, () =&gt; &#123; // å›è°ƒå‡½æ•°å¯ä»¥æ‹¿åˆ°æœ€æ–°å€¼ console.log(&#x27;callback&#x27;, this.state.val) &#125;) console.log(this.state.val) // æ‹¿ä¸åˆ°æœ€æ–°å€¼&#125; setState é»˜è®¤ä¼šåˆå¹¶å¤šæ¬¡æ‰§è¡Œï¼Œæœ€å render ç»“æœè¿˜æ˜¯ 1 12345componentDidMount() &#123; this.setState(&#123;val: this.state.val + 1&#125;) this.setState(&#123;val: this.state.val + 1&#125;) this.setState(&#123;val: this.state.val + 1&#125;)&#125; setState æœ‰æ—¶åŒæ­¥æ›´æ–°æ ¹æ® setState çš„è§¦å‘æ—¶æœºæ˜¯å¦å— React æ§åˆ¶ å¦‚æœè§¦å‘æ—¶æœºåœ¨ React æ‰€æ§åˆ¶çš„èŒƒå›´ä¹‹å†…ï¼Œåˆ™å¼‚æ­¥æ›´æ–° ç”Ÿå‘½å‘¨æœŸå†…è§¦å‘ React JSX äº‹ä»¶å†…è§¦å‘ å¦‚æœè§¦å‘æ—¶æœºä¸åœ¨ React æ‰€æ§åˆ¶çš„èŒƒå›´ä¹‹å†…ï¼Œåˆ™åŒæ­¥æ›´æ–° setTimeout setInterval è‡ªå®šä¹‰çš„ DOM äº‹ä»¶ Promise then ajax ç½‘ç»œè¯·æ±‚å›è°ƒ setState æœ‰æ—¶ä¸ä¼šåˆå¹¶ç¬¬ä¸€ï¼ŒåŒæ­¥æ›´æ–°ï¼Œä¸ä¼šåˆå¹¶ ç¬¬äºŒï¼Œä¼ å…¥å‡½æ•°ï¼Œä¸ä¼šåˆå¹¶ ï¼ˆå¯¹è±¡å¯ä»¥ Object.assignï¼Œå‡½æ•°æ— æ³•åˆå¹¶ï¼‰ 123this.setState((prevState, props) =&gt; &#123; return &#123; val: prevState.val + 1 &#125;&#125;) ç­”æ¡ˆé¢˜ç›®ä»£ç æ‰§è¡Œæ‰“å° 0 0 2 3 é¢˜ç›®ä»¥ä¸‹ä»£ç ï¼Œè¿è¡Œä¼šè¾“å‡ºä»€ä¹ˆ 123456let a = &#123; n: 1 &#125;let b = aa.x = a = &#123; n: 2 &#125;console.log(a.x) console.log(b.x) å€¼ç±»å‹ vs å¼•ç”¨ç±»å‹12345let a = 100let b = alet a = &#123; n: 1 &#125;let b = a è¿ç»­èµ‹å€¼è¿ç»­èµ‹å€¼æ˜¯å€’åºæ‰§è¡Œã€‚PSï¼šæ—¥å¸¸å·¥ä½œä¸å¯ç”¨è¿ç»­èµ‹å€¼ï¼Œå¯è¯»æ€§å·® 123456let n1, n2n1 = n2 = 100// // ç›¸å½“äº// n2 = 100// n1 = n2 . ä¼˜å…ˆçº§æ›´é«˜1234567let a = &#123;&#125;a.x = 100// å¯æ‹†è§£ä¸ºï¼š// 1. a.x = undefined // åˆå§‹åŒ– a.x å±æ€§// 2. a.x = 100 // ä¸º x å±æ€§èµ‹å€¼ å†çœ‹ä¸‹é¢çš„ä¾‹å­ 1234567let a = &#123; n: 1 &#125;a.x = a = &#123; n: 2 &#125;// // å¯ä»¥æ‹†è§£ä¸º// a.x = undefined// let x = a.x // x å˜é‡æ˜¯å‡æƒ³çš„ï¼Œå®é™…æ‰§è¡Œæ—¶ä¸ä¼šæœ‰// x = a = &#123; n: 2 &#125; ç­”æ¡ˆé¢˜ç›®ä»£ç æ‰§è¡Œæ‰“å° undefined å’Œ &#123; n: 2 &#125; é¢˜ç›®æ‰§è¡Œä»¥ä¸‹ä»£ç ï¼Œä¼šè¾“å‡ºä»€ä¹ˆ 1234567891011121314151617// example1let a = &#123;&#125;, b = &#x27;123&#x27;, c = 123a[b] = &#x27;b&#x27;a[c] = &#x27;c&#x27;console.log(a[b])// example 2let a = &#123;&#125;, b = Symbol(&#x27;123&#x27;), c = Symbol(&#x27;123&#x27;)a[b] = &#x27;b&#x27;a[c] = &#x27;c&#x27;console.log(a[b])// example 3let a = &#123;&#125;, b = &#123; key:&#x27;123&#x27; &#125;, c = &#123; key:&#x27;456&#x27; &#125;a[b] = &#x27;b&#x27;a[c] = &#x27;c&#x27;console.log(a[b]) å¯¹è±¡çš„ key å¯¹è±¡çš„é”®ååªèƒ½æ˜¯å­—ç¬¦ä¸²å’Œ Symbol ç±»å‹ å…¶ä»–ç±»å‹çš„é”®åä¼šè¢«è½¬æ¢æˆå­—ç¬¦ä¸²ç±»å‹ å¯¹è±¡è½¬å­—ç¬¦ä¸²é»˜è®¤ä¼šè°ƒç”¨ toString æ–¹æ³• 12345678910const obj = &#123;&#125;obj[0] = 100const x = &#123; s: &#x27;abc&#x27; &#125;obj[x] = 200const y = Symbol()obj[y] = 300const z = trueobj[z] = 400Object.keys(obj) // [&#x27;0&#x27;, &#x27;[object Object]&#x27;, &#x27;true&#x27;] æœ‰äº›ç±»æ•°ç»„çš„ç»“æ„æ˜¯ &#123; 0: x, 1: y, 2: z, length: 3 &#125; ï¼Œå¦‚ document.getElementsByTagName(&#39;div&#39;)å®é™…ä¸Šå®ƒçš„ key æ˜¯ [&#39;0&#39;, &#39;1&#39;, &#39;2&#39;, &#39;length&#39;] ç­”æ¡ˆé¢˜ç›®ä»£ç æ‰§è¡Œåˆ†åˆ«æ‰“å° &#39;c&#39; &#39;b&#39; &#39;c&#39;é¢˜ç›®è¿è¡Œä»¥ä¸‹ä»£ç ï¼Œä¼šè¾“å‡ºä»€ä¹ˆ 123456789101112131415function changeArg(x) &#123; x = 200 &#125;let num = 100changeArg(num)console.log(&#x27;changeArg num&#x27;, num)let obj = &#123; name: &#x27;åŒè¶Š&#x27; &#125;changeArg(obj)console.log(&#x27;changeArg obj&#x27;, obj)function changeArgProp(x) &#123; x.name = &#x27;å¼ ä¸‰&#x27;&#125;changeArgProp(obj)console.log(&#x27;changeArgProp obj&#x27;, obj) åˆ†æè°ƒç”¨å‡½æ•°ï¼Œä¼ é€’å‚æ•° â€”â€” èµ‹å€¼ä¼ é€’ 123456function fn(x, y) &#123; // ç»§ç»­æ“ä½œ x y&#125;const num = 100const obj = &#123; name: &#x27;åŒè¶Š&#x27; &#125;fn(num, obj) ä»¥ä¸Šä»£ç ç›¸å½“äº 123456const num = 100const obj = &#123; name: &#x27;åŒè¶Š&#x27; &#125;let x = numlet y = obj// ç»§ç»­æ“ä½œ x y è§£é¢˜æ‰§è¡Œé¢˜ç›®ä»£ç åˆ†åˆ«è¾“å‡º 100 &#123;name: &#39;åŒè¶Š&#39;&#125; &#123;name: &#39;å¼ ä¸‰&#39;&#125;","categories":[],"tags":[]},{"title":"é¢è¯•é«˜é¢‘ä»£ç ","slug":"é¢è¯•é«˜é¢‘ä»£ç ","date":"2023-04-02T03:43:23.000Z","updated":"2023-04-07T05:43:44.667Z","comments":true,"path":"2023/04/02/é¢è¯•é«˜é¢‘ä»£ç /","link":"","permalink":"https://github.com/zheng521/2023/04/02/%E9%9D%A2%E8%AF%95%E9%AB%98%E9%A2%91%E4%BB%A3%E7%A0%81/","excerpt":"","text":"éå†èŠ‚ç‚¹ç”Ÿæˆè™šæ‹ŸDom 123456789101112131415161718192021222324252627282930313233class Vnode &#123; constructor(tag, data, value, type) &#123; this.tag = tag &amp;&amp; tag.toLowerCass() this.data = data this.value = value this.type = type this.children = [] &#125; appendChild(vnode) &#123; this.children.push(vnode) &#125;&#125;function createVnode(node) &#123; const nodeType = node.type let _vnode = null if (nodeType === 1) &#123; const tagName = node.nodeName const attrList = node.attributes const attrData = &#123;&#125; for (let i = 0; i &lt; attrList.length; i++) &#123; attrData[attrList[i].nodeName] = attrList[i].nodeName &#125; _vnode = new Vnode(tagName, attrData, null, 1) const childNodes = node.childNodes for (let i = 0; i &lt; childNodes.length; i++) &#123; _vnode.appendChild(createVnode(childNodes[i])) &#125; &#125; else if (nodeType === 3) &#123; _vnode = new Vnode(null, node.nodeValue, value, 3) &#125; return _vnode&#125; é€šè¿‡è™šæ‹Ÿdomç”ŸæˆçœŸå®èŠ‚ç‚¹ 12345678910111213141516getRealNode(vnode) &#123; const &#123; tag, data, value, type, children &#125; = vnode let _node = null if (type === 1) &#123; _node = document.createElement(tag) for (let key in data) &#123; _node.setAttribute(key, data[key]) &#125; for (let i = 0; i &lt; children.length; i++) &#123; _node.appendChild(getRealNode(children[i])) &#125; &#125; else if (type === 3) &#123; _node = document.createTextNode(value) &#125; return _node&#125; åƒåˆ†ä½æ ¼å¼è¯ 123456789101112131415function format(n) &#123; let str = n.toString() let arr = str.split(&#x27;&#x27;).reverse() return arr.reduce((prev, cur, index) =&gt; &#123; if (index % 3 === 0) &#123; if (prev) &#123; return cur + &#x27;,&#x27; + prev &#125; else &#123; return cur &#125; &#125; else &#123; return cur + prev &#125; &#125;)&#125; Lazy man 1234567891011121314151617181920212223242526272829303132class LazyMan &#123; constructor (name) &#123; this.name = name this.tasks = [] setTimeout(() =&gt; &#123; this.next() &#125;) &#125; eat (foodName) &#123; const fn = () =&gt; &#123; console.log(`$&#123;this.name&#125; åƒäº† $&#123;foodName&#125;`) this.next() &#125; this.tasks.push(fn) return this &#125; sleep (time) &#123; const fn = () &#123; setTimeout(() =&gt; &#123; console.log(`$&#123;this.name&#125; ç¡äº†$&#123;time&#125;é•¿æ—¶é—´`) this.next() &#125;, time * 1000) &#125; this.tasks.push(fn) return this &#125; next () &#123; let fn = this.tasks.length &amp;&amp; this.tasks.shift() fn() &#125;&#125; arrayToTree æ•°ç»„æ„å»ºæ ‘å½¢ç»“æ„æ•°æ® 123456789101112131415161718192021222324/** * æ•°ç»„è½¬æ ‘å½¢ç»“æ„ * @param &#123;array&#125; list è¢«è½¬æ¢çš„æ•°ç»„ * @param &#123;number|string&#125; root æ ¹èŠ‚ç‚¹ï¼ˆæœ€å¤–å±‚èŠ‚ç‚¹ï¼‰ * @returns array */function arrayToTree(list, root) &#123; let map = &#123;&#125; for (let item of list) &#123; map[item.parentId] = item &#125; let result = [] for (let item of list) &#123; if (item.parentId === root) &#123; result.push(map[item.id]) &#125; else &#123; map[item.parentId].children = map[item.parentId].children ? map[item.parentId].push(map[item.id]) : (map[parent_id].children = [map[id]]) &#125; &#125; return result&#125; flattern 12345function myFlattern(arr) &#123; return arr.reduce((prev, cur) =&gt; prev.concat(Array.isArray(cur) ? myFlattern(cur): cur),[])&#125;","categories":[],"tags":[{"name":"interview","slug":"interview","permalink":"https://github.com/zheng521/tags/interview/"}]},{"title":"å¿…ä¼šæ‰‹å†™ä»£ç (jsåŸºç¡€)","slug":"å¿…ä¼šæ‰‹å†™ä»£ç ","date":"2023-04-01T04:33:14.000Z","updated":"2023-04-04T14:07:36.490Z","comments":true,"path":"2023/04/01/å¿…ä¼šæ‰‹å†™ä»£ç /","link":"","permalink":"https://github.com/zheng521/2023/04/01/%E5%BF%85%E4%BC%9A%E6%89%8B%E5%86%99%E4%BB%A3%E7%A0%81/","excerpt":"","text":"new å®ç° åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ å°†æ–°å¯¹è±¡çš„åŸå‹å±æ€§æŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ å°†æ„é€ å‡½æ•°çš„ä½œç”¨åŸŸèµ‹ç»™æ–°å¯¹è±¡ï¼ˆå› æ­¤thiså°±æŒ‡å‘äº†è¿™ä¸ªæ–°å¯¹è±¡ï¼‰ æ‰§è¡Œæ„é€ å‡½æ•°ä¸­çš„ä»£ç ï¼ˆä¸ºè¿™ä¸ªæ–°å¯¹è±¡æ·»åŠ å±æ€§ï¼‰ è¿”å›æ–°å¯¹è±¡ (åˆ¤æ–­æ–°å¯¹è±¡æ˜¯å¦ä¸ºå¯¹è±¡) &#96;&#96; function myNew(Func) &#123; let obj = &#123;&#125; obj._prop_ = Func.prototype let result = Func.apply(obj, arguments) return result instanceof Object ? result : obj &#125; instaceof å®ç° function myInstaceOf(left, right) &#123; let prop = Object.getPrototypeOf(left) let prototype = right.prototype while (true) &#123; if (prop === null) return false if (prop === prototype) &#123; return true &#125; prop = Object.getPrototypeOf(prop) &#125; &#125; call å®ç° function myCall(context) &#123; context = context || window context.fn = this let args = [...arguments].slice(1) let result = context.fn(...args) delete context.fn return result &#125; applyå®ç° function myApply(content) &#123; context = context || window context.fn = this let result if (arguments[1]) &#123; result = context.fn(...arguments[1]) &#125; else &#123; result = context.fn() &#125; return result &#125; bindå®ç° function myBind(context) &#123; let self = this let args = [...arguments].slice(1) return function () &#123; let newArgs = [...arguments] return self.apply(context, args.concat(newArgs)) &#125; &#125; currryå®ç° function curry(fn, ...args) &#123; if (args.length &gt; fn.length) &#123; fn(...args) &#125; else &#123; return (..._args) =&gt; curry(fn, ...args, ..._args) &#125; &#125; composeå®ç° const compose = (...fns) =&gt; val =&gt; fns.reverse().reduce((acc, fn) =&gt; fn(acc), val); function compose (...fns) &#123; return val =&gt; fns.reverse().reduce((acc, fn) =&gt; fn(acc), val) &#125; pipeå®ç° const pipe = (...fns) =&gt; val =&gt; fns.reduce((acc, fn) =&gt; fn(acc), val); function compose (...fns) &#123; return val =&gt; fns.reduce((acc, fn) =&gt; fn(acc), val) &#125; throttle function throttle(fn, delay) &#123; let timer = null return function (...args) &#123; if (!timer) &#123; timer = setTimeout(() =&gt; &#123; fn.apply(this, args) clearTimeout(timer) &#125;, delay) &#125; &#125; &#125; debounce function debounce(fn, time) &#123; let timer = null return function (...args) &#123; if (timer) clearTimeout(timer) timer = setTimeout(() =&gt; &#123; fn.apply(this, args) &#125;, time) &#125; &#125; object.Freeze å®ç° function myFreeze(obj) &#123; if (obj instanceof Object) &#123; //å°é—­ä¸€ä¸ªå¯¹è±¡ï¼Œé˜»æ­¢æ·»åŠ æ–°å±æ€§å¹¶å°†æ‰€æœ‰ç°æœ‰å±æ€§æ ‡è®°ä¸ºä¸å¯é…ç½® Object.seal(obj) for (let p in obj) &#123; if (obj.hasOwnProperty(p)) &#123; Object.defineProperty(obj, p, &#123;writable: false&#125;) myFreeze(obj[p]) &#125; &#125; &#125; &#125; deepcopy function deepCopy(target, map = new WeakMap()) &#123; if (typeof(target) !== &#39;object&#39;) &#123; return &#125; if (map.get(target)) return map.get(target) let newObj = Array.isArray(target) ? [] : &#123;&#125; map.set(target, newObj) for (let key in target) &#123; if (targe.hasOwnProperty(key)) &#123; if (typeof(key) === &#39;object&#39;) &#123; newObj[key] = deepCopy(target[key]) &#125; else &#123; newObj[key] = target[key] &#125; &#125; &#125; return newObj &#125; reduce å®ç° //è¯­æ³• array.reduce(function(prev, currentValue, currentIndex, arr), initialValue) function myReduce(func, initVal) &#123; let arr = this let base = initVal ? initVal : arr[0] let startPoint = initVal ? 1 : 0 arr.slice(startPoint).forEach((val, index) =&gt; &#123; let base = func(base, val, index+startPoint, arr) &#125;) return base &#125; map å®ç° function myMap(fn, thisArg = []) &#123; return this.reduce((prev, cur, index, arr) =&gt; &#123; return prev.concat(fn.call(thisArg, cur, index, arr)) &#125;, []) &#125; Promise å®ç° const PENDING = &#39;pending&#39; const FULFILLED = &#39;fulfilled&#39; const REJECT = &#39;reject&#39; class Promise &#123; constructor () &#123; this.staus = PENDING this.value = &#39;&#39; this.reason = &#39;&#39; this.onResolvedCallBack = [] this.onRejectedCallBack = [] let resolve = (value) =&gt; &#123; if (this.status === PENDING) &#123; this.status = FULFILLED this.value = value this.onResolvedCallBack.forEach(fn =&gt; fn()) &#125; &#125; let reject = (reason) =&gt; &#123; if (this.status === PENDING) &#123; this.status = REJECT this.reason = reason this.onRejectedCallBack.forEach(fn =&gt; fn()) &#125; &#125; try &#123; exector(resolve, reject) &#125; catch(err) &#123; reject(err) &#125; &#125; then(onFulfilled, onRejected) &#123; if (this.status === FULFIllED) &#123; onFulfilled(this.value) &#125; if (this.status === REJECT) &#123; onRejected(this.reason) &#125; if (this.status === PENDING) &#123; this.onResolvedCallBack.push(() =&gt; onFulfilled(this.value)) this.onRejectedCallBack.push(() =&gt; onRejected(this.reason)) &#125; &#125; &#125; promiseAll function promiseAll(promises) &#123; return new Promise((resolve, reject) =&gt; &#123; let result = [] let count = 0 promises.forEach((promise, index) =&gt; &#123; promise.then(res =&gt; &#123; result.push(res) count++ if (count === promises.length) &#123; resolve(result) &#125; &#125;, err =&gt; reject(err)) &#125;) &#125;) &#125; promiseFinally function promiseFinally(cb) &#123; return this.then(value =&gt; &#123; return Promise.resolve(cb()).then(() =&gt; value) &#125;, err =&gt; &#123; return Promise.resolve(cb()).then(() =&gt; err) &#125;) &#125; promiseAllSetted function promiseAllSetted(promises) &#123; _promises = promises.map(item =&gt; item instanceof Promise ? item : Promise.resolve(item)) return new Promise((resolve, reject) =&gt; &#123; let result = [] let unSettedCount = _promise.length _promises.forEach((promise, index) =&gt; &#123; promise.then(res =&gt; &#123; result[index] = &#123; status: &#39;fulfilled&#39;, res &#125; unSettedCount-- unSettedCount === 0 &amp;&amp; resolve(result) &#125;, err =&gt; &#123; result[index] = &#123; status: &#39;reject&#39;, err &#125; unSettedCount-- unSettedCount === 0 &amp;&amp; reject(result) &#125;) &#125;) &#125;) &#125; promiseRace function promiseRace(promises) &#123; return new Promise((resolve, reject) =&gt; &#123; promises.forEach(promise =&gt; &#123; promise.then(res =&gt; resolve(res), err =&gt; reject(err)) &#125;) &#125;) &#125; promiseAny function promiseAny(promises) &#123; return new Promise((resolve, reject) =&gt; &#123; let count = 0 promises.forEach(promise =&gt; &#123; promise.then(res =&gt; &#123; resolve(res) &#125;, err =&gt; &#123; count++ count === promises.length &amp;&amp; reject(err) &#125;) &#125;) &#125;) &#125; async&#x2F;await è‡ªåŠ¨æ‰§è¡Œå™¨ function runGenerator(gen) &#123; return new Promise((resolve, reject) =&gt; &#123; let g = gen() function _next() &#123; let res try &#123; res = g.next(val) &#125; catch(err) &#123; return reject(err) &#125; if (res.done) &#123; return resolve(res.value) &#125; //res.valueåŒ…è£…ä¸ºpromiseï¼Œä»¥å…¼å®¹yieldåé¢è·ŸåŸºæœ¬ç±»å‹çš„æƒ…å†µ Promise.resolve(res.value).then(val =&gt; &#123; _next(val) &#125;, err =&gt; &#123; g.throw(err) &#125;) &#125; _next() &#125;) &#125; JSON.stringify å®ç° function jsonStringify(data) &#123; let type = typeof data; if(type !== &#39;object&#39;) &#123; let result = data; //data å¯èƒ½æ˜¯åŸºç¡€æ•°æ®ç±»å‹çš„æƒ…å†µåœ¨è¿™é‡Œå¤„ç† if (Number.isNaN(data) || data === Infinity) &#123; //NaN å’Œ Infinity åºåˆ—åŒ–è¿”å› &quot;null&quot; result = &quot;null&quot;; &#125; else if (type === &#39;function&#39; || type === &#39;undefined&#39; || type === &#39;symbol&#39;) &#123; // ç”±äº function åºåˆ—åŒ–è¿”å› undefinedï¼Œå› æ­¤å’Œ undefinedã€symbol ä¸€èµ·å¤„ç† return undefined; &#125; else if (type === &#39;string&#39;) &#123; result = &#39;&quot;&#39; + data + &#39;&quot;&#39;; &#125; return String(result); &#125; else if (type === &#39;object&#39;) &#123; if (data === null) &#123; return &quot;null&quot; // ç¬¬01è®²æœ‰è®²è¿‡ typeof null ä¸º&#39;object&#39;çš„ç‰¹æ®Šæƒ…å†µ &#125; else if (data.toJSON &amp;&amp; typeof data.toJSON === &#39;function&#39;) &#123; return jsonStringify(data.toJSON()); &#125; else if (data instanceof Array) &#123; let result = []; //å¦‚æœæ˜¯æ•°ç»„ï¼Œé‚£ä¹ˆæ•°ç»„é‡Œé¢çš„æ¯ä¸€é¡¹ç±»å‹åˆæœ‰å¯èƒ½æ˜¯å¤šæ ·çš„ data.forEach((item, index) =&gt; &#123; if (typeof item === &#39;undefined&#39; || typeof item === &#39;function&#39; || typeof item === &#39;symbol&#39;) &#123; result[index] = &quot;null&quot;; &#125; else &#123; result[index] = jsonStringify(item); &#125; &#125;); result = &quot;[&quot; + result + &quot;]&quot;; return result.replace(/&#39;/g, &#39;&quot;&#39;); &#125; else &#123; // å¤„ç†æ™®é€šå¯¹è±¡ let result = []; Object.keys(data).forEach((item, index) =&gt; &#123; if (typeof item !== &#39;symbol&#39;) &#123; //key å¦‚æœæ˜¯ symbol å¯¹è±¡ï¼Œå¿½ç•¥ if (data[item] !== undefined &amp;&amp; typeof data[item] !== &#39;function&#39; &amp;&amp; typeof data[item] !== &#39;symbol&#39;) &#123; //é”®å€¼å¦‚æœæ˜¯ undefinedã€functionã€symbol ä¸ºå±æ€§å€¼ï¼Œå¿½ç•¥ result.push(&#39;&quot;&#39; + item + &#39;&quot;&#39; + &quot;:&quot; + jsonStringify(data[item])); &#125; &#125; &#125;); return (&quot;&#123;&quot; + result + &quot;&#125;&quot;).replace(/&#39;/g, &#39;&quot;&#39;); &#125; &#125; &#125; JSON.parse å®ç° var json = &#39;&#123;&quot;a&quot;:&quot;1&quot;, &quot;b&quot;:2&#125;&#39;; // obj å°±æ˜¯ json ååºåˆ—åŒ–ä¹‹åå¾—åˆ°çš„å¯¹è±¡ var obj = eval(&quot;(&quot; + json + &quot;)&quot;);","categories":[],"tags":[{"name":"interview","slug":"interview","permalink":"https://github.com/zheng521/tags/interview/"}]}],"categories":[],"tags":[{"name":"interview","slug":"interview","permalink":"https://github.com/zheng521/tags/interview/"}]}